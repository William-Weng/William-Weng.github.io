
<!DOCTYPE html>
<html
  lang="en"
  data-figures=""
  
    class="page"
  
  
  >
  <head>
<title>【Tauri】大家一起來做一個簡單的影片轉檔工具吧… | William-Weng</title>
<meta charset="utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">





<meta property="og:locale" content="en" />

<meta property="og:type" content="article">
<meta name="description" content="前言
其實在之前，一直很想用Wails做一個簡單的ffmpeg影片轉換器，但後來發現網路有關Tauri的資源好像滿多的，而且聽說Rust很安全，用了之後才發現是真的安全，在編譯的時候全都從頭到尾檢查一遍，導致編譯的速度真的是很慢啊，而且檔案真的是大，動不動就是好幾G的…" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="">
<meta name="twitter:title" content="【Tauri】大家一起來做一個簡單的影片轉檔工具吧…" />
<meta name="twitter:image" content="https://William-Weng.github.io/images/thumbnail/Tauri.png"/>
<meta property="og:url" content="https://William-Weng.github.io/2025/07/tauri%E5%A4%A7%E5%AE%B6%E4%B8%80%E8%B5%B7%E4%BE%86%E5%81%9A%E4%B8%80%E5%80%8B%E7%B0%A1%E5%96%AE%E7%9A%84%E5%BD%B1%E7%89%87%E8%BD%89%E6%AA%94%E5%B7%A5%E5%85%B7%E5%90%A7/" />
<meta property="og:title" content="【Tauri】大家一起來做一個簡單的影片轉檔工具吧…" />
<meta property="og:description" content="前言
其實在之前，一直很想用Wails做一個簡單的ffmpeg影片轉換器，但後來發現網路有關Tauri的資源好像滿多的，而且聽說Rust很安全，用了之後才發現是真的安全，在編譯的時候全都從頭到尾檢查一遍，導致編譯的速度真的是很慢啊，而且檔案真的是大，動不動就是好幾G的…" />
<meta property="og:image" content="https://William-Weng.github.io/images/thumbnail/Tauri.png" />
  <meta name="keywords" content="rust,cargo,tauri,ffmpeg,vue" />

<link rel="apple-touch-icon" sizes="180x180" href="https://William-Weng.github.io/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://William-Weng.github.io/icons/favicon-32x32.png">
<link rel="manifest" href="https://William-Weng.github.io/icons/site.webmanifest">

<link rel="canonical" href="https://William-Weng.github.io/2025/07/tauri%E5%A4%A7%E5%AE%B6%E4%B8%80%E8%B5%B7%E4%BE%86%E5%81%9A%E4%B8%80%E5%80%8B%E7%B0%A1%E5%96%AE%E7%9A%84%E5%BD%B1%E7%89%87%E8%BD%89%E6%AA%94%E5%B7%A5%E5%85%B7%E5%90%A7/">



<link rel="preload" href="https://William-Weng.github.io/css/styles.a556cef0edd8ecd9821e661f7f201d84cc18d0c6435703889db2949aea0eccb84b7ac9a2bb49093b03f5e7d9ce21c23c705efd6dcbd7e8018afae9a9f32ca095.css" integrity = "sha512-pVbO8O3Y7NmCHmYffyAdhMwY0MZDVwOInbKUmuoOzLhLesmiu0kJOwP159nOIcI8cF79bcvX6AGK&#43;ump8yyglQ==" as="style" crossorigin="anonymous">



<link rel="preload" href="https://William-Weng.github.io/en/js/bundle.ef18b7cbccbaaff8de21870709eafc196f6f5ffe0a978d7cc1fc489d084755617a79d19dff9f284e00b02ee517b64e64dc02d7ea310d40d485a957333cef7099.js" as="script" integrity=
"sha512-7xi3y8y6r/jeIYcHCer8GW9vX/4Kl418wfxInQhHVWF6edGd/58oTgCwLuUXtk5k3ALX6jENQNSFqVczPO9wmQ==" crossorigin="anonymous">


<link rel="stylesheet" type="text/css" href="https://William-Weng.github.io/css/styles.a556cef0edd8ecd9821e661f7f201d84cc18d0c6435703889db2949aea0eccb84b7ac9a2bb49093b03f5e7d9ce21c23c705efd6dcbd7e8018afae9a9f32ca095.css" integrity="sha512-pVbO8O3Y7NmCHmYffyAdhMwY0MZDVwOInbKUmuoOzLhLesmiu0kJOwP159nOIcI8cF79bcvX6AGK&#43;ump8yyglQ==" crossorigin="anonymous">

  </head>
  <body
    data-code="100"
    data-lines="true"
    id="documentTop"
    data-lang="en"
  >

<header class="nav_header" >
  <nav class="nav"><a href='https://William-Weng.github.io/' class="nav_brand nav_item" title="William-Weng">William-Weng
  <div class="nav_close">
    <div><svg class="icon">
  <title>open-menu</title>
  <use xlink:href="#open-menu"></use>
</svg>
<svg class="icon">
  <title>closeme</title>
  <use xlink:href="#closeme"></use>
</svg>
</div>
  </div>
</a>

    <div class='nav_body nav_body_left'>
      
      
      
        

      
<div class='follow'>
<div class="color_mode">
  <input type="checkbox" class="color_choice" id="mode">
</div>

</div>

    </div>
  </nav>
</header>

    <main>
  
<div class="grid-inverse wrap content">
  <article class="post_content">
    <h1 class="post_title">【Tauri】大家一起來做一個簡單的影片轉檔工具吧…</h1>
  <div class="post_meta">
    <span><svg class="icon">
  <title>calendar</title>
  <use xlink:href="#calendar"></use>
</svg>
</span>
    <span class="post_date">
      Jul 11, 2025</span>
    <span class="post_time"> · 16 min read</span><span>&nbsp;· <a href='https://William-Weng.github.io/tags/rust/' title="rust" class="post_tag button button_translucent">rust
        </a><a href='https://William-Weng.github.io/tags/cargo/' title="cargo" class="post_tag button button_translucent">cargo
        </a><a href='https://William-Weng.github.io/tags/tauri/' title="tauri" class="post_tag button button_translucent">tauri
        </a><a href='https://William-Weng.github.io/tags/ffmpeg/' title="ffmpeg" class="post_tag button button_translucent">ffmpeg
        </a><a href='https://William-Weng.github.io/tags/vue/' title="vue" class="post_tag button button_translucent">vue
        </a>
    </span>
    <span class="page_only">&nbsp;·
  <div class="post_share">
    Share on:
    <a href="https://twitter.com/intent/tweet?text=%e3%80%90Tauri%e3%80%91%e5%a4%a7%e5%ae%b6%e4%b8%80%e8%b5%b7%e4%be%86%e5%81%9a%e4%b8%80%e5%80%8b%e7%b0%a1%e5%96%ae%e7%9a%84%e5%bd%b1%e7%89%87%e8%bd%89%e6%aa%94%e5%b7%a5%e5%85%b7%e5%90%a7%e2%80%a6&url=https%3a%2f%2fWilliam-Weng.github.io%2f2025%2f07%2ftauri%25E5%25A4%25A7%25E5%25AE%25B6%25E4%25B8%2580%25E8%25B5%25B7%25E4%25BE%2586%25E5%2581%259A%25E4%25B8%2580%25E5%2580%258B%25E7%25B0%25A1%25E5%2596%25AE%25E7%259A%2584%25E5%25BD%25B1%25E7%2589%2587%25E8%25BD%2589%25E6%25AA%2594%25E5%25B7%25A5%25E5%2585%25B7%25E5%2590%25A7%2f&tw_p=tweetbutton" class="twitter" title="Share on Twitter" target="_blank" rel="nofollow">
      <svg class="icon">
  <title>twitter</title>
  <use xlink:href="#twitter"></use>
</svg>

    </a>
    <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fWilliam-Weng.github.io%2f2025%2f07%2ftauri%25E5%25A4%25A7%25E5%25AE%25B6%25E4%25B8%2580%25E8%25B5%25B7%25E4%25BE%2586%25E5%2581%259A%25E4%25B8%2580%25E5%2580%258B%25E7%25B0%25A1%25E5%2596%25AE%25E7%259A%2584%25E5%25BD%25B1%25E7%2589%2587%25E8%25BD%2589%25E6%25AA%2594%25E5%25B7%25A5%25E5%2585%25B7%25E5%2590%25A7%2f&t=%e3%80%90Tauri%e3%80%91%e5%a4%a7%e5%ae%b6%e4%b8%80%e8%b5%b7%e4%be%86%e5%81%9a%e4%b8%80%e5%80%8b%e7%b0%a1%e5%96%ae%e7%9a%84%e5%bd%b1%e7%89%87%e8%bd%89%e6%aa%94%e5%b7%a5%e5%85%b7%e5%90%a7%e2%80%a6" class="facebook" title="Share on Facebook" target="_blank" rel="nofollow">
      <svg class="icon">
  <title>facebook</title>
  <use xlink:href="#facebook"></use>
</svg>

    </a>
    <a href="#linkedinshare" id = "linkedinshare" class="linkedin" title="Share on LinkedIn" rel="nofollow">
      <svg class="icon">
  <title>linkedin</title>
  <use xlink:href="#linkedin"></use>
</svg>

    </a>
    <a href="https://William-Weng.github.io/2025/07/tauri%E5%A4%A7%E5%AE%B6%E4%B8%80%E8%B5%B7%E4%BE%86%E5%81%9A%E4%B8%80%E5%80%8B%E7%B0%A1%E5%96%AE%E7%9A%84%E5%BD%B1%E7%89%87%E8%BD%89%E6%AA%94%E5%B7%A5%E5%85%B7%E5%90%A7/" title="Copy Link" class="link link_yank">
      <svg class="icon">
  <title>copy</title>
  <use xlink:href="#copy"></use>
</svg>

    </a>
  </div>
  </span>
  </div>

    <div class="post_body"><h2 id="前言">前言</h2>
<p>其實在之前，一直很想用<a href="../../2025/04/wails%E4%B8%80%E8%B5%B7%E4%BE%86%E5%81%9A%E5%80%8B%E6%A1%8C%E9%9D%A2%E7%A8%8B%E5%BC%8F%E5%B0%8F%E5%B7%A5%E5%85%B7%E5%90%A7/">Wails</a>做一個簡單的<code>ffmpeg影片轉換器</code>，但後來發現網路有關<a href="https://juejin.cn/post/7206206630933086264">Tauri</a>的資源好像滿多的，而且聽說<code>Rust</code>很安全，用了之後才發現是真的安全，在編譯的時候全都從頭到尾<a href="https://www.sakura.com.tw/Video/Content/47">檢查</a>一遍，導致編譯的速度真的是很慢啊，而且檔案真的是大，動不動就是好幾G的…</p>
<h2 id="作業環境">作業環境</h2>
<table>
  <thead>
      <tr>
          <th>項目</th>
          <th>版本</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>macOS</td>
          <td>Sequoia 15.5</td>
      </tr>
      <tr>
          <td>Visual Studio Code</td>
          <td>1.101.2</td>
      </tr>
      <tr>
          <td>ffmpeg</td>
          <td>7.1.1</td>
      </tr>
      <tr>
          <td>nodejs</td>
          <td>22.14.0</td>
      </tr>
      <tr>
          <td>rust</td>
          <td>1.88</td>
      </tr>
      <tr>
          <td>tauri</td>
          <td>2.6.2</td>
      </tr>
  </tbody>
</table>
<video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/result.mp4" type="video/mp4" />
</video>
<h2 id="ffmpeg影片轉檔工具">FFmpeg影片轉檔工具</h2>
<h3 id="先前準備工作">先前準備工作</h3>
<ul>
<li>安裝<a href="https://rustwiki.org/zh-CN/std/process/struct.Command.html">相關</a>的工具，如果之前有<a href="https://magiclen.org/execute/">裝過</a>的話，就可以跳過這一步了…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew install node
</span></span><span style="display:flex;"><span>brew install rust
</span></span><span style="display:flex;"><span>brew install ffmpeg
</span></span><span style="display:flex;"><span>cargo install create-tauri-app
</span></span></code></pre></div><ul>
<li>利用<a href="https://ithelp.ithome.com.tw/m/articles/10300975">create-tauri-app</a>來建立一個名叫<code>tauri_ffmpeg_gui</code>的專案，使用的是<a href="https://zh.wikipedia.org/zh-tw/TypeScript">Vue3 + Typescript</a>…</li>
<li>過程這邊就不多做說明了，可以參考<a href="../../../2025/06/tauri%E7%95%B6rust%E8%B7%9Fweb%E5%90%8C%E5%9C%A8%E4%B8%80%E8%B5%B7%E5%9C%A8%E4%B8%80%E8%B5%B7%E5%9C%A8%E4%B8%80%E8%B5%B7/">上一篇</a>文章…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd ~/Desktop
</span></span><span style="display:flex;"><span>cargo create-tauri-app tauri_ffmpeg_gui --template vue-ts
</span></span><span style="display:flex;"><span>cd tauri_ffmpeg_gui
</span></span><span style="display:flex;"><span>npm install naive-ui
</span></span></code></pre></div><ul>
<li>範例這用這一部<a href="https://zh.wikipedia.org/zh-tw/Big_Buck_Bunny">影片</a>，就請先<code>自行下載</code>囉…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4
</span></span></code></pre></div><ul>
<li>rust<a href="https://crates.io/crates/once_cell">套件表</a>如下，用到的其實不多，主要是用來處理<a href="https://crates.io/crates/nix">線程</a>跟<a href="https://crates.io/crates/windows-sys">系統指令</a>的…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">///</span> <span style="color:#a6e22e">src-tauri</span><span style="color:#960050;background-color:#1e0010">/</span><span style="color:#a6e22e">src</span><span style="color:#960050;background-color:#1e0010">/</span><span style="color:#a6e22e">Cargo</span>.<span style="color:#a6e22e">toml</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">dependencies</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">tauri</span> = { <span style="color:#a6e22e">version</span> = <span style="color:#e6db74">&#34;2&#34;</span>, <span style="color:#a6e22e">features</span> = [] }
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">tauri-plugin-opener</span> = <span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">serde</span> = { <span style="color:#a6e22e">version</span> = <span style="color:#e6db74">&#34;1&#34;</span>, <span style="color:#a6e22e">features</span> = [<span style="color:#e6db74">&#34;derive&#34;</span>] }
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">serde_json</span> = <span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">chrono</span> = <span style="color:#e6db74">&#34;0.4.41&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">once_cell</span> = <span style="color:#e6db74">&#34;1.21.3&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">nix</span> = { <span style="color:#a6e22e">version</span> = <span style="color:#e6db74">&#34;0.27&#34;</span>, <span style="color:#a6e22e">features</span> = [<span style="color:#e6db74">&#34;signal&#34;</span>] }
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">windows-sys</span> = { <span style="color:#a6e22e">version</span> = <span style="color:#e6db74">&#34;0.60.2&#34;</span>, <span style="color:#a6e22e">features</span> = [<span style="color:#e6db74">&#34;Win32_System_Threading&#34;</span>] }
</span></span></code></pre></div><ul>
<li>最後，就讓它跑一下試試看…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install
</span></span><span style="display:flex;"><span>npm run tauri dev
</span></span></code></pre></div><p><figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt=""
      
        class="image_figure image_internal image_unprocessed"
        src="https://William-Weng.github.io/images/2025/rust-tauri-ffmpeg/init.png"
      
      
    />

    </picture>
</figure>
</p>
<h3 id="監聽tauri的drag-drop功能">監聽tauri的drag-drop功能</h3>
<ul>
<li>不知道為什麼，把檔案拖曳到<a href="https://medium.com/ui-ux%E7%B7%B4%E5%8A%9F%E5%9D%8A/html5-%E6%96%B0%E5%A2%9E%E7%9A%84%E8%A1%A8%E5%96%AE%E5%85%83%E4%BB%B6-%E5%B1%AC%E6%80%A7-3d7c4f5688a2">輸入框</a>上，不會有跟網頁一樣的反應，也許是Tauri的<a href="https://kmcha.com/cidian/%E6%9C%89%E6%84%8F%E7%82%BA%E4%B9%8B">有意為之</a>吧？</li>
</ul>
<video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/drag.mp4" type="video/mp4" />
</video>
<ul>
<li>這裡要監聽<code>tauri://drag-drop</code>事件，來取得<a href="https://v2.tauri.app/reference/javascript/api/namespaceevent/">拖曳</a>時的反應…</li>
<li>我們就來新增一個<code>filePath</code>變數，來儲存拖曳進來的檔案路徑…</li>
<li>主要的內容就是<code>listenDragDrop()</code>這段程式碼…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">// src/App.vue
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">setup</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">onMounted</span>, <span style="color:#a6e22e">onUnmounted</span>, <span style="color:#a6e22e">ref</span>, <span style="color:#a6e22e">computed</span>, <span style="color:#a6e22e">watch</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;vue&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">invoke</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@tauri-apps/api/core&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">listen</span>, <span style="color:#a6e22e">UnlistenFn</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@tauri-apps/api/event&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">filePath</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>(<span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">TauriEvent</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">DragDrop</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tauri://drag-drop&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">listenDragDrop() {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">listen</span>(<span style="color:#a6e22e">TauriEvent</span>.<span style="color:#a6e22e">DragDrop</span>, (<span style="color:#a6e22e">event</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">payload</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">paths</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">filePath</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">payload</span>.<span style="color:#a6e22e">paths</span>[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">onMounted</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">listenDragDrop</span>();
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main-drop-area&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;filePath&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;檔案路徑會顯示在這裡&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;flex: 1;&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-left: 8px;&#34;</span>&gt;<span style="color:#960050;background-color:#1e0010">轉換</span>&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span></code></pre></div><ul>
<li>有關<a href="https://developer.mozilla.org/zh-TW/docs/Web/CSS">CSS</a>的部分也附在這裡…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#f92672">style</span> <span style="color:#f92672">scoped</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">main-drop-area</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">absolute</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">top</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">left</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">right</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">bottom</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">align-items</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">dashed</span> <span style="color:#ae81ff">#888</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background</span>: <span style="color:#66d9ef">transparent</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">startBtn</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#43a047</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#fff</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#ae81ff">#1b5e20</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">stopBtn</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#e53935</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#fff</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#ae81ff">#b71c1c</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">log-segment</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-bottom</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#ae81ff">#444</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">4</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">8</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">4</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">word-break</span>: break-all;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">log-segment</span>:<span style="color:#a6e22e">last-child</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-bottom</span>: <span style="color:#66d9ef">none</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span><span style="color:#f92672">style</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#f92672">style</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>:<span style="color:#a6e22e">root</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-family</span>: Inter, Avenir, Helvetica, Arial, <span style="color:#66d9ef">sans-serif</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">16</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">line-height</span>: <span style="color:#ae81ff">24</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">400</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#0f0f0f</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#f6f6f6</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-synthesis</span>: <span style="color:#66d9ef">none</span>;
</span></span><span style="display:flex;"><span>  text-rendering: <span style="color:#66d9ef">optimizeLegibility</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">-webkit-</span>font-smoothing: antialiased;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">-moz-</span>osx-font-smoothing: grayscale;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">-webkit-</span>text-size-adjust: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">container</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding-top</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">vh</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">logo</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">6</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">1.5</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">will-change</span>: <span style="color:#66d9ef">filter</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">transition</span>: <span style="color:#ae81ff">0.75</span><span style="color:#66d9ef">s</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">logo</span>.<span style="color:#a6e22e">tauri</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">filter</span>: drop-shadow(<span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">em</span> <span style="color:#ae81ff">#24c8db</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">row</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">a</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">500</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#646cff</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">text-decoration</span>: <span style="color:#66d9ef">inherit</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">a</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#535bf2</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">h1</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">input</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">button</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">8</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#66d9ef">transparent</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.6</span><span style="color:#66d9ef">em</span> <span style="color:#ae81ff">1.2</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">500</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-family</span>: <span style="color:#66d9ef">inherit</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#0f0f0f</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#ffffff</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">transition</span>: <span style="color:#66d9ef">border-color</span> <span style="color:#ae81ff">0.25</span><span style="color:#66d9ef">s</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">box-shadow</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> rgba(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.2</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">button</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">cursor</span>: <span style="color:#66d9ef">pointer</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">button</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-color</span>: <span style="color:#ae81ff">#396cd8</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#f92672">button</span>:<span style="color:#a6e22e">active</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-color</span>: <span style="color:#ae81ff">#396cd8</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#e8e8e8</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">input</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">button</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">outline</span>: <span style="color:#66d9ef">none</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#greet-input {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-right</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@<span style="color:#66d9ef">media</span> <span style="color:#f92672">(</span><span style="color:#f92672">prefers-color-scheme</span><span style="color:#f92672">:</span> <span style="color:#f92672">dark</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>  :<span style="color:#a6e22e">root</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#f6f6f6</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#2f2f2f</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">a</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#24c8db</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">input</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">button</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#ffffff</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#0f0f0f</span><span style="color:#ae81ff">98</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">button</span>:<span style="color:#a6e22e">active</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#0f0f0f</span><span style="color:#ae81ff">69</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span><span style="color:#f92672">style</span><span style="color:#f92672">&gt;</span>
</span></span></code></pre></div><h3 id="執行系統的指令功能">執行系統的指令功能</h3>
<ul>
<li>這個APP最主要的就是要執行系統的指令功能，讓使用者可以透過APP來執行系統的指令…</li>
<li>比如說，可以透過APP來執行ffmpeg指令，將影片轉換成不同的格式。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ffmpeg -i input.mp4 -c:v libx264 -pix_fmt yuv420p -c:a aac output.mp4
</span></span></code></pre></div><ul>
<li>在上一步中，我們取得了影片檔的位置，接著就可以透過APP來執行<a href="https://hackmd.io/@kd01/ffmpeg-help">ffmpeg指令</a>，將影片轉換成不同的格式。</li>
<li>就是按下<code>轉換</code>按鈕後，APP會開始執行<a href="https://blog.miniasp.com/post/2022/10/08/Useful-tool-FFmpeg">ffmpeg指令</a>，將影片轉換成不同的格式。</li>
<li>在這邊我們就取名為<code>start_convert()</code>，並在按下按鈕後rust端的<code>start_convert(path:)</code>。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">setup</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">onMounted</span>, <span style="color:#a6e22e">onUnmounted</span>, <span style="color:#a6e22e">ref</span>, <span style="color:#a6e22e">computed</span>, <span style="color:#a6e22e">watch</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;vue&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">invoke</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@tauri-apps/api/core&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">listen</span>, <span style="color:#a6e22e">UnlistenFn</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@tauri-apps/api/event&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">filePath</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>(<span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">TauriEvent</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">DragDrop</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tauri://drag-drop&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">listenDragDrop() {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">listen</span>(<span style="color:#a6e22e">TauriEvent</span>.<span style="color:#a6e22e">DragDrop</span>, (<span style="color:#a6e22e">event</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">event</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">payload</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">paths</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">filePath</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">payload</span>.<span style="color:#a6e22e">paths</span>[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">start_convert() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">invoke</span>(<span style="color:#e6db74">&#34;start_convert&#34;</span>, { <span style="color:#a6e22e">path</span>: <span style="color:#66d9ef">filePath.value</span> });
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`result = </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">result</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">onMounted</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">listenDragDrop</span>();
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main-drop-area&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;filePath&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;檔案路徑會顯示在這裡&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;flex: 1;&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-left: 8px;&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;start_convert&#34;</span>&gt;<span style="color:#960050;background-color:#1e0010">轉換</span>&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span></code></pre></div><ul>
<li>接著就是組合成啟動shell的完整指令，就是類似長這樣子<code>sh -c ffmpeg -i &lt;path&gt; output.mp4</code></li>
<li>這裡輸出的<a href="https://rustwiki.org/zh-CN/std/process/struct.Command.html">std::process::Command</a>就是真的要執行的功能…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/library/_process.rs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">use</span> std::process::Command;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">command_combine</span>(command: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; <span style="color:#a6e22e">Command</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> cfg!(windows) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> cmd <span style="color:#f92672">=</span> Command::new(<span style="color:#e6db74">&#34;cmd&#34;</span>);
</span></span><span style="display:flex;"><span>        cmd.arg(<span style="color:#e6db74">&#34;/C&#34;</span>);
</span></span><span style="display:flex;"><span>        cmd.arg(command);
</span></span><span style="display:flex;"><span>        cmd
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> cmd <span style="color:#f92672">=</span> Command::new(<span style="color:#e6db74">&#34;sh&#34;</span>);
</span></span><span style="display:flex;"><span>        cmd.arg(<span style="color:#e6db74">&#34;-c&#34;</span>);
</span></span><span style="display:flex;"><span>        cmd.arg(command);
</span></span><span style="display:flex;"><span>        cmd
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>再來就是要產生ffmpeg指令的細節，將影片轉成<code>output.mp4</code>…</li>
<li>目前的指令是長這樣子<code>ffmpeg -i &lt;path&gt; output.mp4</code></li>
<li>啟動指令就是<code>command.output()</code>…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/utility/_command.rs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">use</span> std::{<span style="color:#66d9ef">str</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#66d9ef">crate</span>::library:: {
</span></span><span style="display:flex;"><span>    _process::{command_combine}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">ffmpeg_command_maker</span>(path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; String {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> setting <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> ffmpeg_cmd <span style="color:#f92672">=</span> format!(<span style="color:#e6db74">&#34;ffmpeg -i </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span>, path, setting, <span style="color:#e6db74">&#34;output.mp4&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> command <span style="color:#f92672">=</span> command_combine(ffmpeg_cmd.as_str());
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> _ <span style="color:#f92672">=</span> command.output().expect(<span style="color:#e6db74">&#34;failed to execute process&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ffmpeg_cmd
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>啟動後會發現，雖然可以<a href="https://dev.to/wade3c/linux-rang-cheng-shi-zai-bei-jing-zhi-xing-c9o">成功</a>執行，但產生的output.mp4會在<code>src-tauri/target</code>目錄之下…</li>
</ul>
<video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/convert.mp4" type="video/mp4" />
</video>
<ul>
<li>而且，APP會<a href="https://blog.csdn.net/Pan_peter/article/details/128875714">卡住</a>，一定要等它轉換完成才能做其它事，就一直轉圈圈，有點像當掉的感覺…</li>
<li>其實因為指令是在<a href="https://bingdoal.github.io/linux/2021/03/linux-run-in-background/">前台</a>處理，所以APP會卡住，所以後面會把指令轉在<a href="https://theriseofdavid.github.io/2021/05/12/linux/jobs-kill">後台</a>執行…</li>
<li>在Linux下，在指令後面加上<code>&amp;</code>就可以在<a href="http://old.linux.vbird.org/linux_basic/0440processcontrol/0440processcontrol-fc4.php">背景執行</a>了，不然正常應該要<a href="https://blog.csdn.net/Com_ma/article/details/78442473">等它跑完</a>才能換下一個指令，大家可以試試看…</li>
</ul>
<video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/jobs.mp4" type="video/mp4" />
</video>
<ul>
<li>接下來使用<a href="https://stackoverflow.com/questions/37832407/what-does-spawn-expect-and-send-command-in-linux-unix">spawn()</a>，讓command在<a href="https://cancerpio.medium.com/linux%E6%8C%87%E4%BB%A4%E6%87%B6%E4%BA%BA%E5%8C%85-nohup-redirecting-output%E7%AD%89%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4-71a0bec0a38">背景執行</a>，讓APP不會<a href="https://www.cnblogs.com/bulh/articles/12779173.html">卡住</a>，可以做其它事…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/utility/_command.rs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">use</span> std::{<span style="color:#66d9ef">str</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#66d9ef">crate</span>::library:: {
</span></span><span style="display:flex;"><span>    _process::{command_combine}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">ffmpeg_command_maker</span>(path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; String {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> setting <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;-c:v libx264 -c:a aac&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> ffmpeg_cmd <span style="color:#f92672">=</span> format!(<span style="color:#e6db74">&#34;ffmpeg -i </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span>, path, setting, <span style="color:#e6db74">&#34;output.mp4&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> command <span style="color:#f92672">=</span> command_combine(ffmpeg_cmd.as_str());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// let _ = command.output().expect(&#34;failed to execute process&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> _ <span style="color:#f92672">=</span> command.spawn();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ffmpeg_cmd
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>再執行一次就可以發現，APP不會卡住，可以做其它事…</li>
<li>也可以看到ffmpeg的進度在下方的<code>terminal</code>上出現…</li>
</ul>
<video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/spawn.mp4" type="video/mp4" />
</video>
<h3 id="檔案輸出">檔案輸出</h3>
<ul>
<li>將轉換完成的檔案輸出到跟原始檔案相同的路徑…</li>
<li>當然檔案名要改一下，不然就會不能轉換了…</li>
<li>簡單來說，就是把要轉換檔案的目錄取出來，然後再自訂一個輸出檔名…</li>
<li>這裡我們以<code>&lt;filename&gt;_YYYYMMDD_HHMMSS.&lt;format&gt;</code>做為輸出的檔名…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/utility/_command.rs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">use</span> std::{<span style="color:#66d9ef">str</span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> std::io::Error;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#66d9ef">crate</span>::library:: {
</span></span><span style="display:flex;"><span>    _process::{command_combine},
</span></span><span style="display:flex;"><span>    _path::{full_path_maker},
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">ffmpeg_command_maker</span>(path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; Result<span style="color:#f92672">&lt;</span>String, Error<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> setting <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;-c:v libx264 -pix_fmt yuv420p -c:a aac&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> output_path <span style="color:#f92672">=</span> full_path_maker(path, <span style="color:#e6db74">&#34;mp4&#34;</span>)<span style="color:#f92672">?</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> ffmpeg_cmd <span style="color:#f92672">=</span> format!(<span style="color:#e6db74">&#34;ffmpeg -i </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span>, path, setting, output_path.display());
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> command <span style="color:#f92672">=</span> command_combine(ffmpeg_cmd.as_str());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> _ <span style="color:#f92672">=</span> command.spawn();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Ok(ffmpeg_cmd)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>接下來就來就是快速說明<code>full_path_maker()</code>是怎麼產生檔名路徑的…</li>
<li>首先是做一個error的產生器…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/library/_error.rs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">use</span> std::io::{Error, ErrorKind};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">io_error_maker</span>(kind: <span style="color:#a6e22e">ErrorKind</span>, message: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; <span style="color:#a6e22e">Error</span> {
</span></span><span style="display:flex;"><span>    Error::new(kind, message)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>接下來就是產生<a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/dateformatter-dateformat-%E7%9A%84%E9%80%83%E8%84%AB%E5%AD%97%E4%B8%B2-5832fc0551de">時間後綴</a>字串…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/library/_string.rs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">use</span> chrono;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">timestamp_filename</span>(prefix: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, format: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; String {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> now <span style="color:#f92672">=</span> chrono::Local::now();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> datetime_str <span style="color:#f92672">=</span> now.format(<span style="color:#e6db74">&#34;%Y%m%d_%H%M%S&#34;</span>).to_string();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">.</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span>, prefix, datetime_str, format)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>最後就是產生檔名路徑字串…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/library/_path.rs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">use</span> std::path::{Path, PathBuf};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> std::io::{Error, ErrorKind};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#66d9ef">crate</span>::library::_string::timestamp_filename;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#66d9ef">crate</span>::library::_error::io_error_maker;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">file_exists</span>(file_path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span>    Path::new(file_path).exists()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">file_parent_dir</span>(file_path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; Option<span style="color:#f92672">&lt;&amp;</span>Path<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    Path::new(file_path).parent()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">file_stem</span>(file_path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; Option<span style="color:#f92672">&lt;&amp;</span><span style="color:#66d9ef">str</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    Path::new(file_path).file_stem().and_then(<span style="color:#f92672">|</span>s<span style="color:#f92672">|</span> s.to_str())
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">full_path_maker</span>(path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, format: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; Result<span style="color:#f92672">&lt;</span>PathBuf, Error<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> dir_path <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> file_parent_dir(path) {
</span></span><span style="display:flex;"><span>        Some(dir) <span style="color:#f92672">=&gt;</span> dir,
</span></span><span style="display:flex;"><span>        None <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> error_message <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>format!(<span style="color:#e6db74">&#34;無法取得父目錄: </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span>, path);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> Err(io_error_maker(ErrorKind::NotFound, error_message));
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> prefix <span style="color:#f92672">=</span> file_stem(path).unwrap_or(<span style="color:#e6db74">&#34;output&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> filename <span style="color:#f92672">=</span> timestamp_filename(prefix, format);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Ok(dir_path.join(filename))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>可以試試看，看看是不是可以輸出檔案到外部了？</li>
</ul>
<video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/output.mp4" type="video/mp4" />
</video>
<h3 id="讀取進度">讀取進度</h3>
<ul>
<li>大家可以發現，雖然的確是在<a href="https://magiclen.org/ffmpeg-ogg/">轉換檔案</a>了，但是輸出的<a href="https://zh.wikipedia.org/zh-tw/%E4%BB%93%E9%A2%89">文字資訊</a>卻只能在terminal中看到…</li>
<li>像這樣子完全看不到過程，也無法<a href="https://www.darencademy.com/article/view/id/15849">掌握</a>到底是不是轉換完成了，所以我們必須把輸出在<a href="https://github.com/LCTT/TranslateProject/blob/master/published/201507/20150526%2020%20Useful%20Terminal%20Emulators%20for%20Linux.md">terminal</a>的資訊<a href="https://24h.pchome.com.tw/search/?q=%E6%93%B7%E5%8F%96%E5%8D%A1">擷取</a>出來…</li>
<li>不過因為這<a href="https://www.godgame.com.tw/bigad/event_mj_teach/teach04.html">中間</a>的過程是<code>一直在輸出</code>的，所以不能用一般<code>return</code>的方式來取得資訊，而是要用<a href="https://v2.tauri.app/reference/javascript/api/namespaceevent/">emit()</a>的來取得資訊，也就是使用<a href="https://zh.wikipedia.org/zh-tw/%E8%A1%8C%E7%A8%8B%E9%96%93%E9%80%9A%E8%A8%8A">Inter-Process Communication - 跨程序通訊 (IPC)</a>來處理…</li>
</ul>
<video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/progress.mp4" type="video/mp4" />
</video>
<ul>
<li>接下來就把輸出資訊改成<a href="https://v2.tauri.app/develop/calling-frontend/">emit</a>的方式來處理…</li>
<li>主要就是<code>emit_payload()</code>的使用，很像使用<a href="https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E7%B0%A1%E6%98%93%E8%AA%AA%E6%98%8Excode%E4%B8%AD%E7%9A%84%E8%B3%87%E6%96%99%E5%82%B3%E9%81%9E-notification%E6%96%B9%E5%BC%8F-b0498c96e565">Notification</a>的訂閱方式來處理…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/library/_tauri.rs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">use</span> serde::Serialize;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> tauri::{Emitter, Window};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">emit_payload</span><span style="color:#f92672">&lt;</span>S: <span style="color:#a6e22e">Serialize</span> <span style="color:#f92672">+</span> Clone<span style="color:#f92672">&gt;</span>(target: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">Window</span>, event: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, payload: <span style="color:#a6e22e">S</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> _ <span style="color:#f92672">=</span> target.emit(event, payload);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>所以呢，就把<code>start_convert()</code>改成<code>emit_payload()</code>的方式來處理，這樣我們就把資訊<a href="zh.wikipedia.org/zh-tw/%E9%A3%9E%E9%B8%BD%E4%BC%A0%E4%B9%A6">飛鴿傳書</a>傳給前端了…</li>
<li>這裡先設定兩個事件，分別是<code>error</code>和<code>finish</code>…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/lib.rs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#75715e">#[tauri::command]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">start_convert</span>(window: <span style="color:#a6e22e">Window</span>, path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> window_clone <span style="color:#f92672">=</span> window.clone();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>file_exists(path) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> error <span style="color:#f92672">=</span> io_error_maker(ErrorKind::NotFound, <span style="color:#e6db74">&#34;檔案不存在&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, <span style="color:#e6db74">&#34;error&#34;</span>, format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> cmd_str <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> ffmpeg_command_maker(path) {
</span></span><span style="display:flex;"><span>        Ok(cmd) <span style="color:#f92672">=&gt;</span> cmd,
</span></span><span style="display:flex;"><span>        Err(err) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, <span style="color:#e6db74">&#34;error&#34;</span>, format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, err)),
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, <span style="color:#e6db74">&#34;finish&#34;</span>, cmd_str);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>那在網頁端要怎麼<a href="https://medium.com/jeremy-xue-s-blog/swift-observer-notifications-942ebba55c9">收信</a>呢？</li>
<li>我們使用<code>UnlistenFn</code>來處理，其實它就是一個<a href="https://pjchender.dev/javascript/js-closure/">closure</a>，把Unlisten的功能記下來，之後才能中斷它…</li>
<li>所以呢就會有註冊事件監聽用的<code>registerListener()</code>，跟解除事件監聽用的<code>unregisterListener()</code>…</li>
<li>所以<code>start_convert()</code>也不用接回傳值了，而是由<code>handleCommandError()</code>來處理…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">FFmpegEvent</span> {
</span></span><span style="display:flex;"><span>  Error <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;error&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Finish</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;finish&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Progress</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;progress&#34;</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">logs</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>&lt;<span style="color:#f92672">string</span><span style="color:#960050;background-color:#1e0010">[]</span>&gt;([]);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">unlistenError</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>&lt;<span style="color:#f92672">UnlistenFn</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#a6e22e">null</span>&gt;(<span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">logBox</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>&lt;<span style="color:#f92672">HTMLElement</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#a6e22e">null</span>&gt;(<span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">watchLogs</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">computed</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> [...<span style="color:#a6e22e">logs</span>.<span style="color:#a6e22e">value</span>];
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">registerListener() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">unlistenError</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">handleCommandError</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">unregisterListener() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">unlistenError</span>.<span style="color:#a6e22e">value</span>) { <span style="color:#a6e22e">unlistenError</span>.<span style="color:#a6e22e">value</span>(); }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">start_convert() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">invoke</span>(<span style="color:#e6db74">&#34;start_convert&#34;</span>, { <span style="color:#a6e22e">path</span>: <span style="color:#66d9ef">filePath.value</span> });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handleCommandError() {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">listen</span>&lt;<span style="color:#f92672">string</span>&gt;(<span style="color:#a6e22e">FFmpegEvent</span>.Error, (<span style="color:#a6e22e">event</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">payload</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">payload</span> <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">logs</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">payload</span>);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">watch</span>(<span style="color:#a6e22e">watchLogs</span>, () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">setTimeout</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">logBox</span>.<span style="color:#a6e22e">value</span>) { <span style="color:#a6e22e">logBox</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">scrollTop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">logBox</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">scrollHeight</span>; }
</span></span><span style="display:flex;"><span>  }, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">onMounted</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">registerListener</span>();
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">onUnmounted</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">unregisterListener</span>();
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><ul>
<li>而在畫面方面呢，就加一個叫<code>logBox</code>的<code>div</code>，用來顯示訊息…</li>
<li>當rust傳出<a href="https://cn.vuejs.org/guide/essentials/watchers">錯誤訊息</a>時，就用<code>logs</code>把它記下來，順便顯示…</li>
<li>然後啊，也希望可以讓<a href="https://crossing.cw.com.tw/article/13907">使用者</a>可以點擊訊息後，訊息可以一直<a href="zh.wikipedia.org/zh-tw/%E5%86%85%E5%8D%B7%E5%8C%96">自動捲</a>到最下面…</li>
<li>所以加上<a href="https://www.letswrite.tw/vue3-composition-api/">watch</a>的來監聽變動的<code>watchLogs</code>，在每次變動時自動捲動到最下面…</li>
<li>大家可以試試看，如果不使用<a href="https://kuro.tw/posts/2019/02/23/%E8%AB%87%E8%AB%87-JavaScript-%E7%9A%84-setTimeout-%E8%88%87-setInterval/">setTimeout()</a>，或者只是監聽<code>logs</code>的話，會有什麼變化呢？</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main-drop-area&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">ref</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;logBox&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-top: 20px; width: 90%; background: #222; color: #fff; font-size: 14px; border-radius: 6px; padding: 8px; height: 200px; max-height: 200px; overflow: auto;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;(line, idx) in logs&#34;</span> <span style="color:#960050;background-color:#1e0010">:</span><span style="color:#a6e22e">key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;idx&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;log-segment&#34;</span>&gt;{{ <span style="color:#a6e22e">line</span> }}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span></code></pre></div><video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/emitter.mp4" type="video/mp4" />
</video>
<h3 id="處理完整的指令訊息">處理完整的指令訊息</h3>
<ul>
<li>接下來要處理完整的指令訊息</li>
<li>也就是處理<code>error</code> / <code>finish</code> / <code>progress</code>這三種狀態訊息…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">FFmpegEvent</span> {
</span></span><span style="display:flex;"><span>  Error <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;error&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Finish</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;finish&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Progress</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;progress&#34;</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">unlistenFunctions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>&lt;<span style="color:#f92672">UnlistenFn</span><span style="color:#960050;background-color:#1e0010">[]</span>&gt;([]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">registerListener() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">unlistenFunctions</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">push</span>(<span style="color:#66d9ef">await</span> <span style="color:#a6e22e">handleCommandError</span>());
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">unlistenFunctions</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">push</span>(<span style="color:#66d9ef">await</span> <span style="color:#a6e22e">handleCommandFinish</span>());
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">unlistenFunctions</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">push</span>(<span style="color:#66d9ef">await</span> <span style="color:#a6e22e">handleCommandProgress</span>());
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">unregisterListener() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">unlistenFunctions</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">handle</span><span style="color:#f92672">:</span> () <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>) <span style="color:#f92672">=&gt;</span> { <span style="color:#a6e22e">handle</span>(); });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handleCommandFinish() {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">listen</span>&lt;<span style="color:#f92672">string</span>&gt;(<span style="color:#a6e22e">FFmpegEvent</span>.<span style="color:#a6e22e">Finish</span>, (<span style="color:#a6e22e">event</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">payload</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">payload</span> <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">logs</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">payload</span>);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handleCommandProgress() {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">listen</span>&lt;<span style="color:#f92672">string</span>&gt;(<span style="color:#a6e22e">FFmpegEvent</span>.<span style="color:#a6e22e">Progress</span>, (<span style="color:#a6e22e">event</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">payload</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">payload</span> <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">logs</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">payload</span>);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handleCommandError() {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">listen</span>&lt;<span style="color:#f92672">string</span>&gt;(<span style="color:#a6e22e">FFmpegEvent</span>.Error, (<span style="color:#a6e22e">event</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">payload</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">payload</span> <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isConverting</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">logs</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">payload</span>);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handleCommandStart() {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">listen</span>&lt;<span style="color:#f92672">string</span>&gt;(<span style="color:#a6e22e">FFmpegEvent</span>.<span style="color:#a6e22e">Start</span>, (<span style="color:#a6e22e">event</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">payload</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">payload</span> <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">logs</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">payload</span>);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>首先呢，我們要把顯示在terminal上的訊息，轉到<a href="https://colobu.com/rust-cookbook/os/external.html">管線 - Stdio::piped()</a>上處理，也就是<a href="https://yodalee.me/2020/03/2020_rust_std_process/">子行程</a>，這樣我們才能不<a href="https://www.youtube.com/watch?v=5L3bdZ2yOYw">卡卡</a>，進而取得相關的訊息…</li>
<li>然後呢，也把<code>Command</code>傳出去，再做更進一步的處理…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/utility/_command.rs (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">use</span> std::{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">str</span>,
</span></span><span style="display:flex;"><span>    io::Error,
</span></span><span style="display:flex;"><span>    process::{Command, Stdio}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#66d9ef">crate</span>::library:: {
</span></span><span style="display:flex;"><span>    _process::{command_combine},
</span></span><span style="display:flex;"><span>    _path::{full_path_maker},
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">ffmpeg_command_maker</span>(path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; Result<span style="color:#f92672">&lt;</span>(Command, String), Error<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> setting <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;-c:v libx264 -c:a aac&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> output_path <span style="color:#f92672">=</span> full_path_maker(path, <span style="color:#e6db74">&#34;mp4&#34;</span>)<span style="color:#f92672">?</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> ffmpeg_cmd <span style="color:#f92672">=</span> format!(<span style="color:#e6db74">&#34;ffmpeg -i </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span>, path, setting, output_path.display());
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> command <span style="color:#f92672">=</span> command_combine(ffmpeg_cmd.as_str());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    command.stdout(Stdio::piped());
</span></span><span style="display:flex;"><span>    command.stderr(Stdio::piped());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Ok((command, ffmpeg_cmd))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>這裡也定義了三種事件，分別是<code>錯誤 - error</code>、<code>完成 - finish</code>和<code>進度 - progress</code>…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/utility/_constant.rs (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">FFmpegEvent</span> {
</span></span><span style="display:flex;"><span>    Error,
</span></span><span style="display:flex;"><span>    Finish,
</span></span><span style="display:flex;"><span>    Progress,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">impl</span> FFmpegEvent {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">as_str</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">&amp;</span>&#39;static <span style="color:#66d9ef">str</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">match</span> self {
</span></span><span style="display:flex;"><span>            FFmpegEvent::Error <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;error&#34;</span>,
</span></span><span style="display:flex;"><span>            FFmpegEvent::Finish <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;finish&#34;</span>,
</span></span><span style="display:flex;"><span>            FFmpegEvent::Progress <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;progress&#34;</span>,
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>這邊最主要的就是<code>child_log()</code>，用來處理子進程的輸出…</li>
<li>一般來說呢，大部分的terminal訊息都會放到<code>stderr</code>做輸出，所以我們只取<code>stderr</code>的訊息…</li>
<li>然後以<code>\r</code>跟<code>\n</code>來分隔訊息，就是<code>return</code>跟<code>enter</code>…</li>
<li>至於為什麼會有<a href="https://blog.csdn.net/qq_29229567/article/details/89669949">\r</a>呢？因為有些訊息會一直在<a href="https://seacatcry.pixnet.net/blog/post/13732061">同一行</a>顯示、更新的…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/lib.rs (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">mod</span> utility;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">mod</span> library;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> std:: {
</span></span><span style="display:flex;"><span>    io::{ErrorKind, Read},
</span></span><span style="display:flex;"><span>    process::Child,
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> tauri::Window;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> library::{
</span></span><span style="display:flex;"><span>    _error::io_error_maker,
</span></span><span style="display:flex;"><span>    _path::file_exists,
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> utility::{
</span></span><span style="display:flex;"><span>    _command::ffmpeg_command_maker,
</span></span><span style="display:flex;"><span>    _tauri::emit_payload,
</span></span><span style="display:flex;"><span>    _constant::FFmpegEvent,
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[tauri::command]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">start_convert</span>(window: <span style="color:#a6e22e">Window</span>, path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> window_clone <span style="color:#f92672">=</span> window.clone();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>file_exists(path) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> error <span style="color:#f92672">=</span> io_error_maker(ErrorKind::NotFound, <span style="color:#e6db74">&#34;檔案不存在&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, <span style="color:#e6db74">&#34;error&#34;</span>, format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> (<span style="color:#66d9ef">mut</span> cmd, cmd_str) <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> ffmpeg_command_maker(path) {
</span></span><span style="display:flex;"><span>        Ok(result) <span style="color:#f92672">=&gt;</span> result,
</span></span><span style="display:flex;"><span>        Err(error) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Error.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error)),
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> child <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> cmd.spawn() {
</span></span><span style="display:flex;"><span>        Ok(child) <span style="color:#f92672">=&gt;</span> child,
</span></span><span style="display:flex;"><span>        Err(error) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Error.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error)),
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    child_log(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> child, <span style="color:#f92672">|</span>line<span style="color:#f92672">|</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>line.is_empty() { emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Progress.as_str(), line); }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Finish.as_str(), <span style="color:#f92672">&amp;</span>cmd_str)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">child_log</span><span style="color:#f92672">&lt;</span>F: Fn(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">str</span>)<span style="color:#f92672">&gt;</span>(child: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">mut</span> Child, closure: <span style="color:#a6e22e">F</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Some(<span style="color:#66d9ef">mut</span> stderr) <span style="color:#f92672">=</span> child.stderr.take() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> buffer <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span><span style="color:#66d9ef">u8</span>; <span style="color:#ae81ff">4096</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> partial <span style="color:#f92672">=</span> String::new();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">loop</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">match</span> stderr.read(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> buffer) {
</span></span><span style="display:flex;"><span>                Err(_) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">break</span>,
</span></span><span style="display:flex;"><span>                Ok(<span style="color:#ae81ff">0</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">break</span>,
</span></span><span style="display:flex;"><span>                Ok(size) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">let</span> chunk <span style="color:#f92672">=</span> String::from_utf8_lossy(<span style="color:#f92672">&amp;</span>buffer[<span style="color:#f92672">..</span>size]);
</span></span><span style="display:flex;"><span>                    partial.push_str(<span style="color:#f92672">&amp;</span>chunk);
</span></span><span style="display:flex;"><span>                    partial_line_action(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> partial, <span style="color:#f92672">&amp;</span>closure);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">partial_line_action</span><span style="color:#f92672">&lt;</span>F: Fn(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">str</span>)<span style="color:#f92672">&gt;</span>(partial: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">mut</span> String, closure: <span style="color:#a6e22e">F</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">let</span> Some(index) <span style="color:#f92672">=</span> partial.find(<span style="color:#f92672">|</span><span style="color:#66d9ef">char</span><span style="color:#f92672">|</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;\r&#39;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;\n&#39;</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> line <span style="color:#f92672">=</span> partial[<span style="color:#f92672">..</span>index].to_string();
</span></span><span style="display:flex;"><span>        closure(<span style="color:#f92672">&amp;</span>line);
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">*</span>partial <span style="color:#f92672">=</span> partial[index <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>].to_string();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>我們就來試試看吧，是不是會有相關的訊息顯示出來了呢？</li>
</ul>
<video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/child.mp4" type="video/mp4" />
</video>
<h3 id="指令訊息處理">指令訊息處理</h3>
<ul>
<li>雖然我們能取得完整的指令訊息了，但是…它是最後才一次出現的，並沒有像使用指令一般，一直有訊息提示…</li>
<li>為什麼呢？<a href="https://tw.blog.voicetube.com/archives/65736/%E3%80%8C%E4%BD%A0%E5%A5%BD%E8%81%B0%E6%98%8E%E3%80%8D%E5%8F%AA%E6%9C%83%E8%AA%AA-you-are-smart%EF%BC%9F7-%E5%80%8B%E8%81%B0%E6%98%8E%E7%9B%B8%E9%97%9C%E5%96%AE%E5%AD%97%EF%BC%81%E8%AE%93%E4%BD%A0/">聰明如你</a>一定想到了，因為取得指令訊息不是在子進程中處理的，所以…我們要開個新的進程來處理它，它會在<a href="https://linuxdiary.blogspot.com/2007/10/blog-post_30.html">背景</a>執行…</li>
<li>我們來使用<code>thread::spawn()</code>來開個新的進程來處理指令訊息…</li>
<li>而它的參數<code>move</code>，如果沒有<code>move</code>，thread 內部閉包就不能<a href="https://kaochenlong.com/2023/09/24/ownership.html">直接用</a>外部的變數（除非它是 &lsquo;static 或 Copy），它把<a href="https://rust-lang.tw/book-tw/ch04-01-what-is-ownership.html">所有權 - Ownership</a>移進來了，功能上有點有<code>Objective-C</code>的<a href="https://aiur3908.blogspot.com/2016/08/objective-c-weakblockstrong.html">__block</a>的味道…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/lib.rs (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">start_convert</span>(window: <span style="color:#a6e22e">Window</span>, path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> window_clone <span style="color:#f92672">=</span> window.clone();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>file_exists(path) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> error <span style="color:#f92672">=</span> io_error_maker(ErrorKind::NotFound, <span style="color:#e6db74">&#34;檔案不存在&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, <span style="color:#e6db74">&#34;error&#34;</span>, format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> (<span style="color:#66d9ef">mut</span> cmd, cmd_str) <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> ffmpeg_command_maker(path) {
</span></span><span style="display:flex;"><span>        Ok(result) <span style="color:#f92672">=&gt;</span> result,
</span></span><span style="display:flex;"><span>        Err(error) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Error.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error)),
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    thread::spawn(<span style="color:#66d9ef">move</span> <span style="color:#f92672">||</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> child <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> cmd.spawn() {
</span></span><span style="display:flex;"><span>            Ok(child) <span style="color:#f92672">=&gt;</span> child,
</span></span><span style="display:flex;"><span>            Err(error) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Error.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error)),
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        child_log(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> child, <span style="color:#f92672">|</span>line<span style="color:#f92672">|</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>line.is_empty() { emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Progress.as_str(), line); }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Finish.as_str(), <span style="color:#f92672">&amp;</span>cmd_str)
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>馬上就來試一下，<a href="https://baike.baidu.com/item/%E6%9C%89%E6%9C%A8%E6%9C%89/18332">有木有</a>，是不是會有<a href="https://www.youtube.com/watch?v=-eJQwguAb08">相關訊息</a>顯示出來了呢？</li>
</ul>
<video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/thread.mp4" type="video/mp4" />
</video>
<h3 id="取消指令">取消指令</h3>
<ul>
<li>雖然能執行了，但是如果<a href="https://medium.com/@capricornmaple/%E6%8E%A2%E7%B4%A2-swift-%E4%B8%AD%E7%9A%84-async-await-%E5%BE%9E%E5%9F%BA%E7%A4%8E%E5%88%B0%E5%AF%A6%E9%9A%9B%E6%87%89%E7%94%A8%E7%9A%84%E5%BF%83%E8%B7%AF%E6%AD%B7%E7%A8%8B-e52d5391663b">再按一次</a>的話，又會跑一個新的進程耶…</li>
<li>有沒有辦法把它<a href="https://zh.wikipedia.org/zh-tw/Kill_(%E5%91%BD%E4%BB%A4)">關掉</a>呢？請使用<code>kill</code>命令…</li>
<li>我們知道要使用<a href="https://www.ibm.com/docs/zh-tw/aix/7.1.0?topic=processes-removing-background-process-kill-command">kill命令</a>的話，就是要取得<a href="https://www.runoob.com/linux/linux-comm-kill.html">PID - 進程ID</a>…</li>
<li>所以我們在程式裡也<a href="https://pedia.cloud.edu.tw/Entry/Detail/?title=%E5%A6%82%E6%B3%95%E7%82%AE%E8%A3%BD">如法炮製</a>一般…</li>
<li>先建立<code>kill_process(pid:)</code>這個終止正在運行的子進程功能…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#e6db74">/// src-tauri/src/library/_process.rs (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#66d9ef">use</span> std::{
</span></span><span style="display:flex;"><span>    ptr::null_mut,
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">kill_process</span>(pid: <span style="color:#66d9ef">u32</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#[cfg(unix)]</span> { kill_unix_process(pid <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">i32</span>); }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#[cfg(windows)]</span> { kill_windows_process(pid); }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[allow(dead_code)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">kill_unix_process</span>(pid: <span style="color:#66d9ef">i32</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">use</span> nix::sys::signal::{kill, Signal};
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">use</span> nix::unistd::Pid;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> _ <span style="color:#f92672">=</span> kill(Pid::from_raw(pid <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">i32</span>), Signal::<span style="color:#66d9ef">SIGKILL</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[allow(dead_code)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">kill_windows_process</span>(pid: <span style="color:#66d9ef">u32</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">use</span> windows_sys::Win32::System::Threading::<span style="color:#66d9ef">PROCESS_TERMINATE</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">use</span> windows_sys::Win32::System::Threading::{OpenProcess, TerminateProcess};
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">unsafe</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> handle <span style="color:#f92672">=</span> OpenProcess(<span style="color:#66d9ef">PROCESS_TERMINATE</span>, <span style="color:#ae81ff">0</span>, pid);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> handle <span style="color:#f92672">!=</span> null_mut() {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> _ <span style="color:#f92672">=</span> TerminateProcess(handle, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>然後呢，把執行後的<code>GLOBAL_PID</code>記下來，然後再使用<code>kill_process(pid:)</code>來終止它…</li>
<li>因為有執行中的<code>子進程ID</code>只會有一個，所以要使用<code>once_cell</code>跟<code>Mutex</code>來處理它的唯一性…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#66d9ef">mod</span> library;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> std::{
</span></span><span style="display:flex;"><span>    sync::Mutex,
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> tauri::Window;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> once_cell::sync::Lazy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> library::{
</span></span><span style="display:flex;"><span>    _process::kill_process,
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">GLOBAL_PID</span>: <span style="color:#a6e22e">Lazy</span><span style="color:#f92672">&lt;</span>Mutex<span style="color:#f92672">&lt;</span>Option<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">u32</span><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#f92672">=</span> Lazy::new(<span style="color:#f92672">||</span> Mutex::new(None));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">global_pid_lock</span>() -&gt; <span style="color:#a6e22e">std</span>::sync::MutexGuard<span style="color:#f92672">&lt;</span>&#39;static, Option<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">u32</span><span style="color:#f92672">&gt;&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">GLOBAL_PID</span>.lock().unwrap()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[tauri::command]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">start_convert</span>(window: <span style="color:#a6e22e">Window</span>, path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> window_clone <span style="color:#f92672">=</span> window.clone();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>file_exists(path) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> error <span style="color:#f92672">=</span> io_error_maker(ErrorKind::NotFound, <span style="color:#e6db74">&#34;檔案不存在&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, <span style="color:#e6db74">&#34;error&#34;</span>, format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> (<span style="color:#66d9ef">mut</span> cmd, cmd_str) <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> ffmpeg_command_maker(path) {
</span></span><span style="display:flex;"><span>        Ok(result) <span style="color:#f92672">=&gt;</span> result,
</span></span><span style="display:flex;"><span>        Err(error) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Error.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error)),
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    thread::spawn(<span style="color:#66d9ef">move</span> <span style="color:#f92672">||</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> child <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> cmd.spawn() {
</span></span><span style="display:flex;"><span>            Ok(child) <span style="color:#f92672">=&gt;</span> child,
</span></span><span style="display:flex;"><span>            Err(error) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">return</span> emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Error.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error)),
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> global <span style="color:#f92672">=</span> global_pid_lock();
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">*</span>global <span style="color:#f92672">=</span> Some(child.id());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        child_log(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> child, <span style="color:#f92672">|</span>line<span style="color:#f92672">|</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>line.is_empty() { emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Progress.as_str(), line); }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> output <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> child.wait_with_output() {
</span></span><span style="display:flex;"><span>            Ok(output) <span style="color:#f92672">=&gt;</span> output,
</span></span><span style="display:flex;"><span>            Err(error) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>                emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Error.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>,error));
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> global <span style="color:#f92672">=</span> global_pid_lock();
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span>global <span style="color:#f92672">=</span> None;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Finish.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, output));
</span></span><span style="display:flex;"><span>        emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Finish.as_str(), <span style="color:#f92672">&amp;</span>cmd_str)
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[tauri::command]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">stop_convert</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> pid_opt <span style="color:#f92672">=</span> <span style="color:#66d9ef">GLOBAL_PID</span>.lock().unwrap();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Some(pid) <span style="color:#f92672">=</span> pid_opt.take() { kill_process(pid); }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[cfg_attr(mobile, tauri::mobile_entry_point)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>    tauri::Builder::default()
</span></span><span style="display:flex;"><span>        .plugin(tauri_plugin_opener::init())
</span></span><span style="display:flex;"><span>        .invoke_handler(tauri::generate_handler![start_convert, stop_convert])
</span></span><span style="display:flex;"><span>        .run(tauri::generate_context!())
</span></span><span style="display:flex;"><span>        .expect(<span style="color:#e6db74">&#34;error while running tauri application&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>再來就是在畫面上的顯示了…</li>
<li>我們在按鈕上做顯示的處理，用<code>isConverting</code>來處理<code>結束</code>跟<code>轉換</code>之間功能的處理…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">RustApi</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">StartConvert</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;start_convert&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">StopConvert</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;stop_convert&#34;</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">isConverting</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handleConvert() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isConverting</span>.<span style="color:#a6e22e">value</span>) { <span style="color:#a6e22e">stop_convert</span>(); <span style="color:#66d9ef">return</span>; }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">start_convert</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handleCommandFinish() {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">listen</span>&lt;<span style="color:#f92672">string</span>&gt;(<span style="color:#a6e22e">FFmpegEvent</span>.<span style="color:#a6e22e">Finish</span>, (<span style="color:#a6e22e">event</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">payload</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">payload</span> <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isConverting</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">logs</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">payload</span>);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">start_convert() {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">logs</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">isConverting</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">invoke</span>(<span style="color:#a6e22e">RustApi</span>.<span style="color:#a6e22e">StartConvert</span>, { <span style="color:#a6e22e">path</span>: <span style="color:#66d9ef">filePath.value</span> });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">stop_convert() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">invoke</span>(<span style="color:#a6e22e">RustApi</span>.<span style="color:#a6e22e">StopConvert</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>/// src/App.vue (部分)
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main-drop-area&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;filePath&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;檔案路徑會顯示在這裡&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;flex: 1;&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-left: 8px;&#34;</span> <span style="color:#a6e22e">:class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;isConverting ? &#39;stopBtn&#39; : &#39;startBtn&#39;&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;handleConvert&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {{ isConverting ? &#39;結束&#39; : &#39;轉換&#39; }}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">ref</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;logBox&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;log-box&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;(line, idx) in logs&#34;</span> <span style="color:#a6e22e">:key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;idx&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;log-segment&#34;</span>&gt;{{ line }}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span></code></pre></div><ul>
<li>然後就來試試是不是能<a href="https://zh.wikipedia.org/zh-tw/1943_%E4%B8%AD%E9%80%94%E5%B3%B6%E6%B5%B7%E6%88%B0">中途</a>停止轉換了？</li>
<li>到這裡為止，主功能都完成，剩下的就是<code>ffmpeg</code>的參數使用了…</li>
</ul>
<video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/stop.mp4" type="video/mp4" />
</video>
<h3 id="參數設定">參數設定</h3>
<ul>
<li>先增加轉檔的格式 / 編碼格式選項…
<figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt=""
      
        class="image_figure image_internal image_unprocessed"
        src="https://William-Weng.github.io/images/2025/rust-tauri-ffmpeg/format.png"
      
      
    />

    </picture>
</figure>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">format</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>(<span style="color:#e6db74">&#34;ts&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">encode</span><span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>(<span style="color:#e6db74">&#34;copy&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">formatOptions</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ts&#34;</span>, <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;.ts&#34;</span> },
</span></span><span style="display:flex;"><span>  { <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;mp4&#34;</span>, <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;.mp4&#34;</span> },
</span></span><span style="display:flex;"><span>  { <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;mkv&#34;</span>, <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;.mkv&#34;</span> },
</span></span><span style="display:flex;"><span>  { <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;mov&#34;</span>, <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;.mov&#34;</span> },
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">encodeOptions</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;copy&#34;</span>, <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;copy&#34;</span> },
</span></span><span style="display:flex;"><span>  { <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;h264&#34;</span>, <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;h264&#34;</span> },
</span></span><span style="display:flex;"><span>  { <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;h265&#34;</span>, <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;h265&#34;</span> },
</span></span><span style="display:flex;"><span>];
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>/// src/App.vue (部分)
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main-drop-area&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;filePath&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;檔案路徑會顯示在這裡&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;flex: 1;&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">select</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;format&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;select-option&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option in formatOptions&#34;</span> <span style="color:#a6e22e">:key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option.value&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option.value&#34;</span>&gt;{{ option.label }}&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">select</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">select</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;format&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;select-option&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option in encodeOptions&#34;</span> <span style="color:#a6e22e">:key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option.value&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option.value&#34;</span>&gt;{{ option.label }}&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">select</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-left: 8px;&#34;</span> <span style="color:#a6e22e">:class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;isConverting ? &#39;stopBtn&#39; : &#39;startBtn&#39;&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;handleConvert&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {{ isConverting ? &#39;結束&#39; : &#39;轉換&#39; }}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">ref</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;logBox&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;log-box&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;(line, idx) in logs&#34;</span> <span style="color:#a6e22e">:key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;idx&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;log-segment&#34;</span>&gt;{{ line }}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">style</span> <span style="color:#a6e22e">scoped</span>&gt;
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">select-option</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-left</span>: <span style="color:#ae81ff">8</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.6</span><span style="color:#66d9ef">em</span> <span style="color:#ae81ff">1.2</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">8</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#ae81ff">#bbb</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#0f0f0f</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#f0f0f0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-family</span>: <span style="color:#66d9ef">inherit</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">cursor</span>: <span style="color:#66d9ef">pointer</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">44</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">line-height</span>: <span style="color:#ae81ff">44</span><span style="color:#66d9ef">px</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">style</span>&gt;
</span></span></code></pre></div><ul>
<li>再增加轉檔的時間區域設定選項…</li>
<li>這裡要注意的是<code>ref</code>跟<code>reactive</code>的<a href="https://medium.com/i-am-mike/vue-3-ref-%E8%B7%9F-reactive-%E6%88%91%E8%A9%B2%E6%80%8E%E9%BA%BC%E9%81%B8-2fb6b6735a3c">差異性</a>，<code>ref</code>是用來存儲單個值的，而<code>reactive</code>是用來存儲<a href="https://ithelp.ithome.com.tw/articles/10329923">對象或數組</a>的…
<figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt=""
      
        class="image_figure image_internal image_unprocessed"
        src="https://William-Weng.github.io/images/2025/rust-tauri-ffmpeg/time.png"
      
      
    />

    </picture>
</figure>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">onMounted</span>, <span style="color:#a6e22e">onUnmounted</span>, <span style="color:#a6e22e">ref</span>, <span style="color:#a6e22e">computed</span>, <span style="color:#a6e22e">watch</span>, <span style="color:#a6e22e">reactive</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;vue&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">startTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">reactive</span>({ <span style="color:#a6e22e">hour</span>: <span style="color:#66d9ef">0</span>, <span style="color:#a6e22e">minute</span>: <span style="color:#66d9ef">0</span>, <span style="color:#a6e22e">second</span>: <span style="color:#66d9ef">0</span> });
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">endTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">reactive</span>({ <span style="color:#a6e22e">hour</span>: <span style="color:#66d9ef">23</span>, <span style="color:#a6e22e">minute</span>: <span style="color:#66d9ef">59</span>, <span style="color:#a6e22e">second</span>: <span style="color:#66d9ef">59</span> });
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main-drop-area&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-right: 8px;&#34;</span>&gt;開始&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;23&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;startTime.hour&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;時&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onHourChange(startTime, 0, 23)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(startTime.hour)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 0 8px;&#34;</span>&gt;:&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;59&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;startTime.minute&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;分&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onMinuteChange(startTime, 0, 59)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(startTime.minute)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 0 8px;&#34;</span>&gt;:&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;59&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;startTime.second&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;秒&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onSecondChange(startTime, 0, 59)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(startTime.second)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-right: 8px;&#34;</span>&gt;結束&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;23&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;endTime.hour&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;時&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onHourChange(startTime, 0, 23)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(endTime.hour)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 0 8px;&#34;</span>&gt;:&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;59&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;endTime.minute&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;分&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onMinuteChange(startTime, 0, 59)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(endTime.minute)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 0 8px;&#34;</span>&gt;:&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;59&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;endTime.second&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;秒&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onSecondChange(startTime, 0, 59)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(endTime.second)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">style</span> <span style="color:#a6e22e">scoped</span>&gt;
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">log-box</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">90</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#222</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#fff</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">14</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">6</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">8</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">200</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">max-height</span>: <span style="color:#ae81ff">200</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">overflow</span>: <span style="color:#66d9ef">auto</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">style</span>&gt;
</span></span></code></pre></div><ul>
<li>加上影片尺寸的設定…
<figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt=""
      
        class="image_figure image_internal image_unprocessed"
        src="https://William-Weng.github.io/images/2025/rust-tauri-ffmpeg/size.png"
      
      
    />

    </picture>
</figure>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">onMounted</span>, <span style="color:#a6e22e">onUnmounted</span>, <span style="color:#a6e22e">ref</span>, <span style="color:#a6e22e">computed</span>, <span style="color:#a6e22e">watch</span>, <span style="color:#a6e22e">reactive</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;vue&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">NSwitch</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;naive-ui&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">videoSize</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">reactive</span>({ <span style="color:#a6e22e">width</span>: <span style="color:#66d9ef">1920</span>, <span style="color:#a6e22e">height</span>: <span style="color:#66d9ef">1080</span> });
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">videoSizeUsed</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>(<span style="color:#66d9ef">false</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>/// src/App.vue (部分)
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-right: 8px;&#34;</span>&gt;尺寸&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;videoSize.width&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;寬&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 0 8px;&#34;</span>&gt;:&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;videoSize.height&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;高&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">n-switch</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;videoSizeUsed&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-left: 16px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">template</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">checked</span>&gt;ON&lt;/<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">template</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">unchecked</span>&gt;OFF&lt;/<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">n-switch</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span></code></pre></div><ul>
<li>再來就是<a href="https://www.youtube.com/watch?v=gna2hVagHqY">美化</a>一下數值的長相跟<a href="">防呆</a>了…</li>
<li>比如說<a href="https://medium.com/codememo/%E5%89%8D%E7%AB%AF-javascript-%E9%99%90%E5%88%B6-input-%E4%B8%AD%E8%8B%B1%E6%96%87%E5%AD%97%E6%95%B8-7908a61a712b">限制</a>輸入範圍，一直顯示兩位數字等…
<figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt=""
      
        class="image_figure image_internal image_unprocessed"
        src="https://William-Weng.github.io/images/2025/rust-tauri-ffmpeg/fix.png"
      
      
    />

    </picture>
</figure>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">displayTime</span>(<span style="color:#a6e22e">value</span>: <span style="color:#66d9ef">number</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">value</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">`0</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">value</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">value</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onHourChange</span>(<span style="color:#a6e22e">refVar</span>: <span style="color:#66d9ef">any</span>, <span style="color:#a6e22e">min</span>: <span style="color:#66d9ef">number</span>, <span style="color:#a6e22e">max</span>: <span style="color:#66d9ef">number</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">refVar</span>.<span style="color:#a6e22e">hour</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">min</span>, Math.<span style="color:#a6e22e">min</span>(<span style="color:#a6e22e">max</span>, <span style="color:#a6e22e">refVar</span>.<span style="color:#a6e22e">hour</span>));
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onMinuteChange</span>(<span style="color:#a6e22e">refVar</span>: <span style="color:#66d9ef">any</span>, <span style="color:#a6e22e">min</span>: <span style="color:#66d9ef">number</span>, <span style="color:#a6e22e">max</span>: <span style="color:#66d9ef">number</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">refVar</span>.<span style="color:#a6e22e">minute</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">min</span>, Math.<span style="color:#a6e22e">min</span>(<span style="color:#a6e22e">max</span>, <span style="color:#a6e22e">refVar</span>.<span style="color:#a6e22e">minute</span>));
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onSecondChange</span>(<span style="color:#a6e22e">refVar</span>: <span style="color:#66d9ef">any</span>, <span style="color:#a6e22e">min</span>: <span style="color:#66d9ef">number</span>, <span style="color:#a6e22e">max</span>: <span style="color:#66d9ef">number</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">refVar</span>.<span style="color:#a6e22e">second</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">min</span>, Math.<span style="color:#a6e22e">min</span>(<span style="color:#a6e22e">max</span>, <span style="color:#a6e22e">refVar</span>.<span style="color:#a6e22e">second</span>));
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onWidthChange</span>(<span style="color:#a6e22e">refVar</span>: <span style="color:#66d9ef">any</span>, <span style="color:#a6e22e">min</span>: <span style="color:#66d9ef">number</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">refVar</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">min</span>, <span style="color:#a6e22e">refVar</span>.<span style="color:#a6e22e">width</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onHeightChange</span>(<span style="color:#a6e22e">refVar</span>: <span style="color:#66d9ef">any</span>, <span style="color:#a6e22e">min</span>: <span style="color:#66d9ef">number</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">refVar</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">min</span>, <span style="color:#a6e22e">refVar</span>.<span style="color:#a6e22e">height</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>/// src/App.vue (部分)
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main-drop-area&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;filePath&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;檔案路徑會顯示在這裡&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;flex: 1;&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">select</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;format&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;select-option&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option in formatOptions&#34;</span> <span style="color:#a6e22e">:key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option.value&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option.value&#34;</span>&gt;{{ option.label }}&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">select</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">select</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;encode&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;select-option&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option in encodeOptions&#34;</span> <span style="color:#a6e22e">:key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option.value&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;option.value&#34;</span>&gt;{{ option.label }}&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">select</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-left: 8px;&#34;</span> <span style="color:#a6e22e">:class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;isConverting ? &#39;stopBtn&#39; : &#39;startBtn&#39;&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;handleConvert&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {{ isConverting ? &#39;結束&#39; : &#39;轉換&#39; }}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-right: 8px;&#34;</span>&gt;開始&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;23&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;startTime.hour&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;時&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onHourChange(startTime, 0, 23)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(startTime.hour)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 0 8px;&#34;</span>&gt;:&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;59&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;startTime.minute&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;分&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onMinuteChange(startTime, 0, 59)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(startTime.minute)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 0 8px;&#34;</span>&gt;:&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;59&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;startTime.second&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;秒&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onSecondChange(startTime, 0, 59)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(startTime.second)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-right: 8px;&#34;</span>&gt;結束&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;23&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;endTime.hour&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;時&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onHourChange(startTime, 0, 23)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(endTime.hour)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 0 8px;&#34;</span>&gt;:&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;59&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;endTime.minute&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;分&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onMinuteChange(startTime, 0, 59)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(endTime.minute)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 0 8px;&#34;</span>&gt;:&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;59&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;endTime.second&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;秒&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onSecondChange(startTime, 0, 59)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;displayTime(endTime.second)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center; margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-right: 8px;&#34;</span>&gt;尺寸&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;-1&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;videoSize.width&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;寬&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onWidthChange(videoSize, -1)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;videoSize.width&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 0 8px;&#34;</span>&gt;:&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;-1&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;videoSize.height&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 60px;&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;高&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">input</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;onHeightChange(videoSize, -1)&#34;</span> <span style="color:#a6e22e">:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;videoSize.height&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">n-switch</span> <span style="color:#a6e22e">v-model</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">number</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;videoSizeUsed&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-left: 16px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">template</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">checked</span>&gt;ON&lt;/<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">template</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">unchecked</span>&gt;OFF&lt;/<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">n-switch</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">ref</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;logBox&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;log-box&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-top: 12px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;(line, idx) in logs&#34;</span> <span style="color:#a6e22e">:key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;idx&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;log-segment&#34;</span>&gt;{{ line }}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span></code></pre></div><ul>
<li>然後再加上自訂<code>ffmpeg</code>的路徑，因為在<a href="https://zh.wikipedia.org/zh-tw/FFmpeg">打包</a>之後，是讀取APP上的ffmpeg路徑的，當然就沒反應啊…
<figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt=""
      
        class="image_figure image_internal image_unprocessed"
        src="https://William-Weng.github.io/images/2025/rust-tauri-ffmpeg/ffmpeg.png"
      
      
    />

    </picture>
</figure>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">ffmpegPath</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>(<span style="color:#e6db74">&#34;/opt/homebrew/bin/ffmpeg&#34;</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>/// src/App.vue (部分)
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main-drop-area&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; width: 90%; align-items: center;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ffmpegPath&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ffmpeg路徑會顯示在這裡&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;flex: 1;&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span></code></pre></div><h3 id="進階參數設定">進階參數設定</h3>
<ul>
<li>在網頁端，我們就把該傳的數值傳給後端，後端再傳給ffmpeg…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">/// src/App.vue (部分)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">start_convert() {</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">start_time</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">startTime</span>.<span style="color:#a6e22e">hour</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">startTime</span>.<span style="color:#a6e22e">minute</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">startTime</span>.<span style="color:#a6e22e">second</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">end_time</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">endTime</span>.<span style="color:#a6e22e">hour</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">endTime</span>.<span style="color:#a6e22e">minute</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">endTime</span>.<span style="color:#a6e22e">second</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scale</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">videoSizeUsed</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">videoSize</span>.<span style="color:#a6e22e">width</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">videoSize</span>.<span style="color:#a6e22e">height</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">``</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">logs</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">isConverting</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">invoke</span>(<span style="color:#a6e22e">RustApi</span>.<span style="color:#a6e22e">StartConvert</span>, {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">command</span>: <span style="color:#66d9ef">ffmpegPath.value</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">path</span>: <span style="color:#66d9ef">filePath.value</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">startTime</span>: <span style="color:#66d9ef">start_time</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">endTime</span>: <span style="color:#66d9ef">end_time</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">format</span>: <span style="color:#66d9ef">format.value</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">encode</span>: <span style="color:#66d9ef">encode.value</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale</span>: <span style="color:#66d9ef">scale</span>
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">initValue() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">logs</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">isConverting</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">onMounted</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">listenDragDrop</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">registerListener</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">initValue</span>();
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><ul>
<li>然後我們把傳入的參數傳遞給<code>start_convert_action</code>函數…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#75715e">// src-tauri/src/lib.rs
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">start_convert_action</span>(window: <span style="color:#a6e22e">Window</span>, command: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, start_time: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, end_time: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, format: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, encode: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, scale: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> window_clone <span style="color:#f92672">=</span> window.clone();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>file_exists(path) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> error <span style="color:#f92672">=</span> io_error_maker(ErrorKind::NotFound, <span style="color:#e6db74">&#34;檔案不存在&#34;</span>);
</span></span><span style="display:flex;"><span>        emit_payload(<span style="color:#f92672">&amp;</span>window_clone, <span style="color:#e6db74">&#34;error&#34;</span>, format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error)); <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> (<span style="color:#66d9ef">mut</span> cmd, cmd_str) <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> ffmpeg_command_maker(command, path, start_time, end_time, format, encode, scale) {
</span></span><span style="display:flex;"><span>        Ok(result) <span style="color:#f92672">=&gt;</span> result,
</span></span><span style="display:flex;"><span>        Err(error) <span style="color:#f92672">=&gt;</span> { emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Error.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error)); <span style="color:#66d9ef">return</span>; },
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    thread::spawn(<span style="color:#66d9ef">move</span> <span style="color:#f92672">||</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> child <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> cmd.spawn() {
</span></span><span style="display:flex;"><span>            Ok(child) <span style="color:#f92672">=&gt;</span> child,
</span></span><span style="display:flex;"><span>            Err(error) <span style="color:#f92672">=&gt;</span> { emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Error.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, error)); <span style="color:#66d9ef">return</span>; },
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> global <span style="color:#f92672">=</span> global_pid_lock();
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">*</span>global <span style="color:#f92672">=</span> Some(child.id());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        child_log(<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">mut</span> child, <span style="color:#f92672">|</span>line<span style="color:#f92672">|</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">!</span>line.is_empty() { emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Progress.as_str(), line); }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> output <span style="color:#f92672">=</span> <span style="color:#66d9ef">match</span> child.wait_with_output() {
</span></span><span style="display:flex;"><span>            Ok(output) <span style="color:#f92672">=&gt;</span> output,
</span></span><span style="display:flex;"><span>            Err(error) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>                emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Error.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>,error));
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> global <span style="color:#f92672">=</span> global_pid_lock();
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">*</span>global <span style="color:#f92672">=</span> None; <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Finish.as_str(), format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{:?}</span><span style="color:#e6db74">&#34;</span>, output));
</span></span><span style="display:flex;"><span>        emit_payload(<span style="color:#f92672">&amp;</span>window_clone, FFmpegEvent::Finish.as_str(), <span style="color:#f92672">&amp;</span>cmd_str);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#[tauri::command]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">start_convert</span>(window: <span style="color:#a6e22e">Window</span>, command: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, start_time: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, end_time: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, format: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, encode: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, scale: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) {
</span></span><span style="display:flex;"><span>    start_convert_action(window, command, path, start_time, end_time, format, encode, scale);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>把網頁端傳來的參數轉換成ffmpeg指令就完工了…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rs" data-lang="rs"><span style="display:flex;"><span><span style="color:#75715e">// src-tauri/src/utility/_command.rs
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> std::{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">str</span>,
</span></span><span style="display:flex;"><span>    io::Error,
</span></span><span style="display:flex;"><span>    collections::HashMap,
</span></span><span style="display:flex;"><span>    process::{Command, Stdio}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#66d9ef">crate</span>::library:: {
</span></span><span style="display:flex;"><span>    _process::{command_combine},
</span></span><span style="display:flex;"><span>    _path::{full_path_maker},
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">ffmpeg_command_maker</span>(command: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, start_time: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, end_time: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, format: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, encode: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, scale: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; Result<span style="color:#f92672">&lt;</span>(Command, String), Error<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> ffmpeg_cmd <span style="color:#f92672">=</span> ffmpeg_code_maker(command, path, start_time, end_time, format, encode, scale)<span style="color:#f92672">?</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">mut</span> command <span style="color:#f92672">=</span> command_combine(ffmpeg_cmd.as_str());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    command.stdout(Stdio::piped());
</span></span><span style="display:flex;"><span>    command.stderr(Stdio::piped());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Ok((command, ffmpeg_cmd))
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">ffmpeg_code_maker</span>(command: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, path: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, start_time: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, end_time: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, format: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, encode: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>, scale: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; Result<span style="color:#f92672">&lt;</span>String, Error<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> codec <span style="color:#f92672">=</span> encode_codec(encode).unwrap_or(<span style="color:#e6db74">&#34;-c copy&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> output_path <span style="color:#f92672">=</span> full_path_maker(path, format)<span style="color:#f92672">?</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> video_scale <span style="color:#f92672">=</span> <span style="color:#66d9ef">if</span> scale.is_empty() {
</span></span><span style="display:flex;"><span>        String::new()
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        format!(<span style="color:#e6db74">&#34;-vf scale=&#39;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;&#34;</span>, scale)
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> ffmpeg_cmd <span style="color:#f92672">=</span> format!(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> -ss </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> -to </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> -i &#39;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39; </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> &#39;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;&#34;</span>, command, start_time, end_time, path, codec, video_scale, output_path.display());
</span></span><span style="display:flex;"><span>    Ok(ffmpeg_cmd)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">encode_codec</span>(encode: <span style="color:#66d9ef">&amp;</span><span style="color:#66d9ef">str</span>) -&gt; Option<span style="color:#f92672">&lt;&amp;</span>&#39;static <span style="color:#66d9ef">str</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> encodes: <span style="color:#a6e22e">HashMap</span><span style="color:#f92672">&lt;&amp;</span><span style="color:#66d9ef">str</span>, <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">str</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>        (<span style="color:#e6db74">&#34;copy&#34;</span>, <span style="color:#e6db74">&#34;-c copy&#34;</span>),
</span></span><span style="display:flex;"><span>        (<span style="color:#e6db74">&#34;h264&#34;</span>, <span style="color:#e6db74">&#34;-c:v libx264 -pix_fmt yuv420p -c:a aac&#34;</span>),
</span></span><span style="display:flex;"><span>        (<span style="color:#e6db74">&#34;h265&#34;</span>, <span style="color:#e6db74">&#34;-c:v libx265 -pix_fmt yuv420p -tag:v hvc1 -c:a aac&#34;</span>),
</span></span><span style="display:flex;"><span>    ].into_iter().collect();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    encodes.get(encode).copied()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>最後再把<a href="https://hsuchihting.github.io/css/20200410/3203726250/">scrollbar</a>隱藏就很像APP了…</li>
<li>名字改一改，圖示換一換，完工…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!doctype html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;icon&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;image/svg+xml&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/vite.svg&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1.0&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">title</span>&gt;影片格式轉換器&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">html</span><span style="color:#f92672">,</span> <span style="color:#f92672">body</span> { <span style="color:#66d9ef">overflow</span>: <span style="color:#66d9ef">hidden</span>; }
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;app&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;module&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/src/main.ts&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><video controls width="50%">
  <source src="/images/2025/rust-tauri-ffmpeg/result.mp4" type="video/mp4" />
</video>
<h2 id="範例程式碼下載---影片轉換器--json處理器">範例程式碼下載 - <a href="https://github.com/William-Weng/Tauri_FFmpeg_GUI">影片轉換器</a> / <a href="/images/2025/rust-tauri-ffmpeg/tauri_json_editor.7z">JSON處理器</a></h2>
<h2 id="後記">後記</h2>
<p>完稿正好碰上<a href="https://tw.nextapple.com/life/20250710/E6E675BDA66764361E90C283082F77C4">小七生日</a>，經過這幾次使用<code>Rust</code>才知道，它之所以難學，倒不是因為語法，而是它檢查太<a href="https://www.abconline.com.tw/video-learn/about-world/korean-buzzwords-5">嚴謹</a>了，光要<code>程式碼補全</code>就要猜得老半天，加上平時用有<a href="https://a1049145827.github.io/2018/06/21/Swift-VS-Kotlin%E4%B9%8B%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%EF%BC%88%E8%AF%91%EF%BC%89/">GC</a> / <a href="https://www.reddit.com/r/ProgrammingLanguages/comments/1dy1sxu/why_do_cpython_and_swift_use_arc_instead_of_a/?tl=zh-hant">ARC</a>做記憶體回收的我，完全不知道為什麼變數會不見，真的是<a href="https://www.youtube.com/watch?v=8XbtrmtQ4kY">難倒</a>我了啊，不過有<a href="https://www.youtube.com/watch?v=-eJQwguAb08">AI</a>的幫助之下，現在學習新語言入門真的是很方便又快速，以後市面上應該就會變成<a href="https://youtu.be/CfndNn8tn0c?si=P97vTXmyRDmSXolM">有經驗的RD + AI</a>的組合了吧？</p>
    </div>
<div class="post_comments">
  
  
  
  
</div>




  </article>
<aside class="sidebar">
  <section class="sidebar_inner">
    <br>
    


    
    
    <h2 class="mt-4">Recent Posts</h2>
    <ul class="flex-column">
      <li>
        <a href="https://William-Weng.github.io/2025/07/tauri%E5%A4%A7%E5%AE%B6%E4%B8%80%E8%B5%B7%E4%BE%86%E5%81%9A%E4%B8%80%E5%80%8B%E7%B0%A1%E5%96%AE%E7%9A%84%E5%BD%B1%E7%89%87%E8%BD%89%E6%AA%94%E5%B7%A5%E5%85%B7%E5%90%A7/" class="nav-link" title="【Tauri】大家一起來做一個簡單的影片轉檔工具吧…">【Tauri】大家一起來做一個簡單的影片轉檔工具吧…</a>
      </li>
      <li>
        <a href="https://William-Weng.github.io/2025/06/tauri%E7%95%B6rust%E8%B7%9Fweb%E5%90%8C%E5%9C%A8%E4%B8%80%E8%B5%B7%E5%9C%A8%E4%B8%80%E8%B5%B7%E5%9C%A8%E4%B8%80%E8%B5%B7/" class="nav-link" title="【Tauri】當Rust跟Web同在一起，在一起，在一起…">【Tauri】當Rust跟Web同在一起，在一起，在一起…</a>
      </li>
      <li>
        <a href="https://William-Weng.github.io/2025/06/rustbruno%E6%88%91%E4%BE%86%E4%BA%86%E4%B8%80%E8%B5%B7%E4%BE%86%E6%89%93%E7%B6%B2%E8%B7%AFapi/" class="nav-link" title="【Rust】Bruno我來了，一起來打網路API…">【Rust】Bruno我來了，一起來打網路API…</a>
      </li>
      <li>
        <a href="https://William-Weng.github.io/2025/05/rust%E8%9E%83%E8%9F%B9%E4%B8%80%E5%91%80%E7%88%AA%E5%85%AB%E5%80%8B%E5%85%A9%E9%A0%AD%E5%B0%96%E5%B0%96%E9%80%99%E9%BA%BC%E5%A4%A7%E7%9A%84%E5%80%8B/" class="nav-link" title="【Rust】螃蟹一呀爪八個，兩頭尖尖，這麼大的個…">【Rust】螃蟹一呀爪八個，兩頭尖尖，這麼大的個…</a>
      </li>
      <li>
        <a href="https://William-Weng.github.io/2025/04/wails%E4%B8%80%E8%B5%B7%E4%BE%86%E5%81%9A%E5%80%8B%E6%A1%8C%E9%9D%A2%E7%A8%8B%E5%BC%8F%E5%B0%8F%E5%B7%A5%E5%85%B7%E5%90%A7/" class="nav-link" title="【Wails】一起來做個桌面程式小工具吧…">【Wails】一起來做個桌面程式小工具吧…</a>
      </li>
      <li>
        <a href="https://William-Weng.github.io/2025/01/docker%E5%AE%B9%E5%99%A8%E5%A4%A7%E5%AE%B6%E4%B8%80%E8%B5%B7%E4%BE%86%E7%95%B6%E9%AF%A8%E9%AD%9A%E6%90%AC%E9%81%8B%E5%B7%A5%E5%90%A7/" class="nav-link" title="【Docker容器】大家一起來當鯨魚搬運工吧…">【Docker容器】大家一起來當鯨魚搬運工吧…</a>
      </li>
      <li>
        <a href="https://William-Weng.github.io/2025/01/%E4%B8%B2%E6%B5%81%E5%BD%B1%E9%9F%B3%E5%A4%A7%E5%AE%B6%E4%B8%80%E8%B5%B7%E4%BE%86%E7%95%B6%E7%9B%B4%E6%92%AD%E4%B8%BB%E5%90%A7/" class="nav-link" title="【串流影音】大家一起來當直播主吧…">【串流影音】大家一起來當直播主吧…</a>
      </li>
      <li>
        <a href="https://William-Weng.github.io/2025/01/eop%E7%B0%A1%E8%AD%9C%E5%A4%A7%E5%B8%AB%E8%AE%93%E6%88%91%E5%80%91%E4%B8%80%E8%B5%B7%E6%88%90%E7%82%BA%E5%A4%A7%E5%B8%AB%E5%90%A7/" class="nav-link" title="【EOP簡譜大師】讓我們一起成為大師吧…">【EOP簡譜大師】讓我們一起成為大師吧…</a>
      </li>
    </ul>
    <div>
      <h2 class="mt-4 taxonomy" id="tags-section">Tags</h2>
      <nav class="tags_nav">
        <a href='https://William-Weng.github.io/tags/swift/' class="post_tag button button_translucent" title="swift">
          SWIFT
          <span class="button_tally">15</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/xcode/' class="post_tag button button_translucent" title="xcode">
          XCODE
          <span class="button_tally">15</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/ios/' class="post_tag button button_translucent" title="ios">
          IOS
          <span class="button_tally">14</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/android/' class="post_tag button button_translucent" title="android">
          ANDROID
          <span class="button_tally">12</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/flutter/' class="post_tag button button_translucent" title="flutter">
          FLUTTER
          <span class="button_tally">11</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/golang/' class="post_tag button button_translucent" title="golang">
          GOLANG
          <span class="button_tally">10</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/game/' class="post_tag button button_translucent" title="game">
          GAME
          <span class="button_tally">9</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/install/' class="post_tag button button_translucent" title="install">
          INSTALL
          <span class="button_tally">8</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/vue/' class="post_tag button button_translucent" title="vue">
          VUE
          <span class="button_tally">8</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/backend/' class="post_tag button button_translucent" title="backend">
          BACKEND
          <span class="button_tally">7</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/database/' class="post_tag button button_translucent" title="database">
          DATABASE
          <span class="button_tally">7</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/dart/' class="post_tag button button_translucent" title="dart">
          DART
          <span class="button_tally">6</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/firebase/' class="post_tag button button_translucent" title="firebase">
          FIREBASE
          <span class="button_tally">6</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/javascript/' class="post_tag button button_translucent" title="javascript">
          JAVASCRIPT
          <span class="button_tally">6</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/api/' class="post_tag button button_translucent" title="api">
          API
          <span class="button_tally">5</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/c%23/' class="post_tag button button_translucent" title="c#">
          C#
          <span class="button_tally">5</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/mysql/' class="post_tag button button_translucent" title="mysql">
          MYSQL
          <span class="button_tally">5</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/unity/' class="post_tag button button_translucent" title="unity">
          UNITY
          <span class="button_tally">5</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/web/' class="post_tag button button_translucent" title="web">
          WEB
          <span class="button_tally">5</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/cargo/' class="post_tag button button_translucent" title="cargo">
          CARGO
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/nodejs/' class="post_tag button button_translucent" title="nodejs">
          NODEJS
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/nosql/' class="post_tag button button_translucent" title="nosql">
          NOSQL
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/rust/' class="post_tag button button_translucent" title="rust">
          RUST
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/sqlite/' class="post_tag button button_translucent" title="sqlite">
          SQLITE
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/typescript/' class="post_tag button button_translucent" title="typescript">
          TYPESCRIPT
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/android-studio/' class="post_tag button button_translucent" title="android studio">
          ANDROID STUDIO
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/ffmpeg/' class="post_tag button button_translucent" title="ffmpeg">
          FFMPEG
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/html/' class="post_tag button button_translucent" title="html">
          HTML
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/kotlin/' class="post_tag button button_translucent" title="kotlin">
          KOTLIN
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/layout/' class="post_tag button button_translucent" title="layout">
          LAYOUT
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/linux/' class="post_tag button button_translucent" title="linux">
          LINUX
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/push/' class="post_tag button button_translucent" title="push">
          PUSH
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/csv/' class="post_tag button button_translucent" title="csv">
          CSV
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/debug/' class="post_tag button button_translucent" title="debug">
          DEBUG
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/docker/' class="post_tag button button_translucent" title="docker">
          DOCKER
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/email/' class="post_tag button button_translucent" title="email">
          EMAIL
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/framework/' class="post_tag button button_translucent" title="framework">
          FRAMEWORK
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/gdscript/' class="post_tag button button_translucent" title="gdscript">
          GDSCRIPT
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/github/' class="post_tag button button_translucent" title="github">
          GITHUB
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/godot/' class="post_tag button button_translucent" title="godot">
          GODOT
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/grails/' class="post_tag button button_translucent" title="grails">
          GRAILS
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/groovy/' class="post_tag button button_translucent" title="groovy">
          GROOVY
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/heroku/' class="post_tag button button_translucent" title="heroku">
          HEROKU
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/image/' class="post_tag button button_translucent" title="image">
          IMAGE
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/java/' class="post_tag button button_translucent" title="java">
          JAVA
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/listview/' class="post_tag button button_translucent" title="listview">
          LISTVIEW
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/macos/' class="post_tag button button_translucent" title="macos">
          MACOS
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/music/' class="post_tag button button_translucent" title="music">
          MUSIC
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/nativescript/' class="post_tag button button_translucent" title="nativescript">
          NATIVESCRIPT
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/scorewriter/' class="post_tag button button_translucent" title="scorewriter">
          SCOREWRITER
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/sheet/' class="post_tag button button_translucent" title="sheet">
          SHEET
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/swiftui/' class="post_tag button button_translucent" title="swiftui">
          SWIFTUI
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/tauri/' class="post_tag button button_translucent" title="tauri">
          TAURI
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/tools/' class="post_tag button button_translucent" title="tools">
          TOOLS
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/ubuntu/' class="post_tag button button_translucent" title="ubuntu">
          UBUNTU
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/2d/' class="post_tag button button_translucent" title="2d">
          2D
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/3d/' class="post_tag button button_translucent" title="3d">
          3D
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/3rd/' class="post_tag button button_translucent" title="3rd">
          3RD
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/ai/' class="post_tag button button_translucent" title="ai">
          AI
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/apns/' class="post_tag button button_translucent" title="apns">
          APNS
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/apollo/' class="post_tag button button_translucent" title="apollo">
          APOLLO
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/ar/' class="post_tag button button_translucent" title="ar">
          AR
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/audio/' class="post_tag button button_translucent" title="audio">
          AUDIO
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/bash/' class="post_tag button button_translucent" title="bash">
          BASH
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/blog/' class="post_tag button button_translucent" title="blog">
          BLOG
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/button/' class="post_tag button button_translucent" title="button">
          BUTTON
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/ca/' class="post_tag button button_translucent" title="ca">
          CA
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/chat/' class="post_tag button button_translucent" title="chat">
          CHAT
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/chatgpt/' class="post_tag button button_translucent" title="chatgpt">
          CHATGPT
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/cheatsheet/' class="post_tag button button_translucent" title="cheatsheet">
          CHEATSHEET
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/color/' class="post_tag button button_translucent" title="color">
          COLOR
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/combine/' class="post_tag button button_translucent" title="combine">
          COMBINE
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/container/' class="post_tag button button_translucent" title="container">
          CONTAINER
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/decrypt/' class="post_tag button button_translucent" title="decrypt">
          DECRYPT
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/encrypt/' class="post_tag button button_translucent" title="encrypt">
          ENCRYPT
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/eop/' class="post_tag button button_translucent" title="eop">
          EOP
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/fcm/' class="post_tag button button_translucent" title="fcm">
          FCM
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/firealpaca/' class="post_tag button button_translucent" title="firealpaca">
          FIREALPACA
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/gmt/' class="post_tag button button_translucent" title="gmt">
          GMT
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/graphql/' class="post_tag button button_translucent" title="graphql">
          GRAPHQL
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/hexo/' class="post_tag button button_translucent" title="hexo">
          HEXO
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/hls/' class="post_tag button button_translucent" title="hls">
          HLS
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/homebrew/' class="post_tag button button_translucent" title="homebrew">
          HOMEBREW
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/hotkey/' class="post_tag button button_translucent" title="hotkey">
          HOTKEY
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/jwt/' class="post_tag button button_translucent" title="jwt">
          JWT
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/koa2/' class="post_tag button button_translucent" title="koa2">
          KOA2
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/love2d/' class="post_tag button button_translucent" title="love2d">
          LOVE2D
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/lua/' class="post_tag button button_translucent" title="lua">
          LUA
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/magic/' class="post_tag button button_translucent" title="magic">
          MAGIC
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/mariadb/' class="post_tag button button_translucent" title="mariadb">
          MARIADB
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/mas-cli/' class="post_tag button button_translucent" title="mas-cli">
          MAS-CLI
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/mongodb/' class="post_tag button button_translucent" title="mongodb">
          MONGODB
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/musescore/' class="post_tag button button_translucent" title="musescore">
          MUSESCORE
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/nginx/' class="post_tag button button_translucent" title="nginx">
          NGINX
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/npm/' class="post_tag button button_translucent" title="npm">
          NPM
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/photoshop/' class="post_tag button button_translucent" title="photoshop">
          PHOTOSHOP
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/raspberry-pi/' class="post_tag button button_translucent" title="raspberry-pi">
          RASPBERRY-PI
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/rdbms/' class="post_tag button button_translucent" title="rdbms">
          RDBMS
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/regex/' class="post_tag button button_translucent" title="regex">
          REGEX
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://William-Weng.github.io/tags/rtmp/' class="post_tag button button_translucent" title="rtmp">
          RTMP
          <span class="button_tally">1</span>
        </a>
        
        
        <br>
        <div class="post_tags_toggle button">All Tags</div>
        <div class="post_tags">
          <div class="tags_list">
            
            <a href='https://William-Weng.github.io/tags/2d/' class=" post_tag button button_translucent" data-position=1 title="2d">2D<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/3d/' class=" post_tag button button_translucent" data-position=1 title="3d">3D<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/3rd/' class=" post_tag button button_translucent" data-position=1 title="3rd">3RD<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/ai/' class=" post_tag button button_translucent" data-position=1 title="ai">AI<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/android/' class=" post_tag button button_translucent" data-position=12 title="android">ANDROID<span class="button_tally">12</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/android-studio/' class=" post_tag button button_translucent" data-position=3 title="android studio">ANDROID STUDIO<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/api/' class=" post_tag button button_translucent" data-position=5 title="api">API<span class="button_tally">5</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/apns/' class=" post_tag button button_translucent" data-position=1 title="apns">APNS<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/apollo/' class=" post_tag button button_translucent" data-position=1 title="apollo">APOLLO<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/ar/' class=" post_tag button button_translucent" data-position=1 title="ar">AR<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/audio/' class=" post_tag button button_translucent" data-position=1 title="audio">AUDIO<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/backend/' class=" post_tag button button_translucent" data-position=7 title="backend">BACKEND<span class="button_tally">7</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/bash/' class=" post_tag button button_translucent" data-position=1 title="bash">BASH<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/blog/' class=" post_tag button button_translucent" data-position=1 title="blog">BLOG<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/button/' class=" post_tag button button_translucent" data-position=1 title="button">BUTTON<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/c%23/' class=" post_tag button button_translucent" data-position=5 title="c#">C#<span class="button_tally">5</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/ca/' class=" post_tag button button_translucent" data-position=1 title="ca">CA<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/cargo/' class=" post_tag button button_translucent" data-position=4 title="cargo">CARGO<span class="button_tally">4</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/chat/' class=" post_tag button button_translucent" data-position=1 title="chat">CHAT<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/chatgpt/' class=" post_tag button button_translucent" data-position=1 title="chatgpt">CHATGPT<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/cheatsheet/' class=" post_tag button button_translucent" data-position=1 title="cheatsheet">CHEATSHEET<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/color/' class=" post_tag button button_translucent" data-position=1 title="color">COLOR<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/combine/' class=" post_tag button button_translucent" data-position=1 title="combine">COMBINE<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/container/' class=" post_tag button button_translucent" data-position=1 title="container">CONTAINER<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/csv/' class=" post_tag button button_translucent" data-position=2 title="csv">CSV<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/dart/' class=" post_tag button button_translucent" data-position=6 title="dart">DART<span class="button_tally">6</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/database/' class=" post_tag button button_translucent" data-position=7 title="database">DATABASE<span class="button_tally">7</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/debug/' class=" post_tag button button_translucent" data-position=2 title="debug">DEBUG<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/decrypt/' class=" post_tag button button_translucent" data-position=1 title="decrypt">DECRYPT<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/docker/' class=" post_tag button button_translucent" data-position=2 title="docker">DOCKER<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/email/' class=" post_tag button button_translucent" data-position=2 title="email">EMAIL<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/encrypt/' class=" post_tag button button_translucent" data-position=1 title="encrypt">ENCRYPT<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/eop/' class=" post_tag button button_translucent" data-position=1 title="eop">EOP<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/fcm/' class=" post_tag button button_translucent" data-position=1 title="fcm">FCM<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/ffmpeg/' class=" post_tag button button_translucent" data-position=3 title="ffmpeg">FFMPEG<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/firealpaca/' class=" post_tag button button_translucent" data-position=1 title="firealpaca">FIREALPACA<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/firebase/' class=" post_tag button button_translucent" data-position=6 title="firebase">FIREBASE<span class="button_tally">6</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/flutter/' class=" post_tag button button_translucent" data-position=11 title="flutter">FLUTTER<span class="button_tally">11</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/framework/' class=" post_tag button button_translucent" data-position=2 title="framework">FRAMEWORK<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/game/' class=" post_tag button button_translucent" data-position=9 title="game">GAME<span class="button_tally">9</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/gdscript/' class=" post_tag button button_translucent" data-position=2 title="gdscript">GDSCRIPT<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/github/' class=" post_tag button button_translucent" data-position=2 title="github">GITHUB<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/gmt/' class=" post_tag button button_translucent" data-position=1 title="gmt">GMT<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/godot/' class=" post_tag button button_translucent" data-position=2 title="godot">GODOT<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/golang/' class=" post_tag button button_translucent" data-position=10 title="golang">GOLANG<span class="button_tally">10</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/grails/' class=" post_tag button button_translucent" data-position=2 title="grails">GRAILS<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/graphql/' class=" post_tag button button_translucent" data-position=1 title="graphql">GRAPHQL<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/groovy/' class=" post_tag button button_translucent" data-position=2 title="groovy">GROOVY<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/heroku/' class=" post_tag button button_translucent" data-position=2 title="heroku">HEROKU<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/hexo/' class=" post_tag button button_translucent" data-position=1 title="hexo">HEXO<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/hls/' class=" post_tag button button_translucent" data-position=1 title="hls">HLS<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/homebrew/' class=" post_tag button button_translucent" data-position=1 title="homebrew">HOMEBREW<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/hotkey/' class=" post_tag button button_translucent" data-position=1 title="hotkey">HOTKEY<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/html/' class=" post_tag button button_translucent" data-position=3 title="html">HTML<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/image/' class=" post_tag button button_translucent" data-position=2 title="image">IMAGE<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/install/' class=" post_tag button button_translucent" data-position=8 title="install">INSTALL<span class="button_tally">8</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/ios/' class=" post_tag button button_translucent" data-position=14 title="ios">IOS<span class="button_tally">14</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/java/' class=" post_tag button button_translucent" data-position=2 title="java">JAVA<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/javascript/' class=" post_tag button button_translucent" data-position=6 title="javascript">JAVASCRIPT<span class="button_tally">6</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/jwt/' class=" post_tag button button_translucent" data-position=1 title="jwt">JWT<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/koa2/' class=" post_tag button button_translucent" data-position=1 title="koa2">KOA2<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/kotlin/' class=" post_tag button button_translucent" data-position=3 title="kotlin">KOTLIN<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/layout/' class=" post_tag button button_translucent" data-position=3 title="layout">LAYOUT<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/linux/' class=" post_tag button button_translucent" data-position=3 title="linux">LINUX<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/listview/' class=" post_tag button button_translucent" data-position=2 title="listview">LISTVIEW<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/love2d/' class=" post_tag button button_translucent" data-position=1 title="love2d">LOVE2D<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/lua/' class=" post_tag button button_translucent" data-position=1 title="lua">LUA<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/macos/' class=" post_tag button button_translucent" data-position=2 title="macos">MACOS<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/magic/' class=" post_tag button button_translucent" data-position=1 title="magic">MAGIC<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/mariadb/' class=" post_tag button button_translucent" data-position=1 title="mariadb">MARIADB<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/mas-cli/' class=" post_tag button button_translucent" data-position=1 title="mas-cli">MAS-CLI<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/mongodb/' class=" post_tag button button_translucent" data-position=1 title="mongodb">MONGODB<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/musescore/' class=" post_tag button button_translucent" data-position=1 title="musescore">MUSESCORE<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/music/' class=" post_tag button button_translucent" data-position=2 title="music">MUSIC<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/mysql/' class=" post_tag button button_translucent" data-position=5 title="mysql">MYSQL<span class="button_tally">5</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/nativescript/' class=" post_tag button button_translucent" data-position=2 title="nativescript">NATIVESCRIPT<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/nginx/' class=" post_tag button button_translucent" data-position=1 title="nginx">NGINX<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/nodejs/' class=" post_tag button button_translucent" data-position=4 title="nodejs">NODEJS<span class="button_tally">4</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/nosql/' class=" post_tag button button_translucent" data-position=4 title="nosql">NOSQL<span class="button_tally">4</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/npm/' class=" post_tag button button_translucent" data-position=1 title="npm">NPM<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/photoshop/' class=" post_tag button button_translucent" data-position=1 title="photoshop">PHOTOSHOP<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/push/' class=" post_tag button button_translucent" data-position=3 title="push">PUSH<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/raspberry-pi/' class=" post_tag button button_translucent" data-position=1 title="raspberry-pi">RASPBERRY-PI<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/rdbms/' class=" post_tag button button_translucent" data-position=1 title="rdbms">RDBMS<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/regex/' class=" post_tag button button_translucent" data-position=1 title="regex">REGEX<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/rtmp/' class=" post_tag button button_translucent" data-position=1 title="rtmp">RTMP<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/rust/' class=" post_tag button button_translucent" data-position=4 title="rust">RUST<span class="button_tally">4</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/rx/' class=" post_tag button button_translucent" data-position=1 title="rx">RX<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/scorewriter/' class=" post_tag button button_translucent" data-position=2 title="scorewriter">SCOREWRITER<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/script/' class=" post_tag button button_translucent" data-position=1 title="script">SCRIPT<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/sheet/' class=" post_tag button button_translucent" data-position=2 title="sheet">SHEET<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/shell/' class=" post_tag button button_translucent" data-position=1 title="shell">SHELL<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/sms/' class=" post_tag button button_translucent" data-position=1 title="sms">SMS<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/sqlite/' class=" post_tag button button_translucent" data-position=4 title="sqlite">SQLITE<span class="button_tally">4</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/ssl/' class=" post_tag button button_translucent" data-position=1 title="ssl">SSL<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/swift/' class=" post_tag button button_translucent" data-position=15 title="swift">SWIFT<span class="button_tally">15</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/swiftui/' class=" post_tag button button_translucent" data-position=2 title="swiftui">SWIFTUI<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/tauri/' class=" post_tag button button_translucent" data-position=2 title="tauri">TAURI<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/tinyurl/' class=" post_tag button button_translucent" data-position=1 title="tinyurl">TINYURL<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/tls/' class=" post_tag button button_translucent" data-position=1 title="tls">TLS<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/tools/' class=" post_tag button button_translucent" data-position=2 title="tools">TOOLS<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/typescript/' class=" post_tag button button_translucent" data-position=4 title="typescript">TYPESCRIPT<span class="button_tally">4</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/ubuntu/' class=" post_tag button button_translucent" data-position=2 title="ubuntu">UBUNTU<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/ui/' class=" post_tag button button_translucent" data-position=1 title="ui">UI<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/unity/' class=" post_tag button button_translucent" data-position=5 title="unity">UNITY<span class="button_tally">5</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/unreal/' class=" post_tag button button_translucent" data-position=1 title="unreal">UNREAL<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/video/' class=" post_tag button button_translucent" data-position=1 title="video">VIDEO<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/virtualbox/' class=" post_tag button button_translucent" data-position=1 title="virtualbox">VIRTUALBOX<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/vscode/' class=" post_tag button button_translucent" data-position=1 title="vscode">VSCODE<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/vue/' class=" post_tag button button_translucent" data-position=8 title="vue">VUE<span class="button_tally">8</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/wails/' class=" post_tag button button_translucent" data-position=1 title="wails">WAILS<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/web/' class=" post_tag button button_translucent" data-position=5 title="web">WEB<span class="button_tally">5</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/webapp/' class=" post_tag button button_translucent" data-position=1 title="webapp">WEBAPP<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/websocket/' class=" post_tag button button_translucent" data-position=1 title="websocket">WEBSOCKET<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/webview/' class=" post_tag button button_translucent" data-position=1 title="webview">WEBVIEW<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/windows/' class=" post_tag button button_translucent" data-position=1 title="windows">WINDOWS<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/xcode/' class=" post_tag button button_translucent" data-position=15 title="xcode">XCODE<span class="button_tally">15</span>
            </a>
            
            
            <a href='https://William-Weng.github.io/tags/yaml/' class=" post_tag button button_translucent" data-position=1 title="yaml">YAML<span class="button_tally">1</span>
            </a>
            
            <div class="tags_sort"><span title="sort alphabetically">[A~Z]</span><span title="sort by count">[0~9]</span>
            </div>
            <span class="tags_hide"><svg class="icon">
            <use xlink:href="#closeme"></use>
          </svg></span>
          </div>
        </div>
      </nav>
    </div>
  </section>
</aside>

  
</div>
    </main><svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter">
    <path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68 0 0 1-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043 0-1.924.366-2.643 1.078a3.56 3.56 0 0 0-1.076 2.605c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846 0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47 0 .929.273 1.705.82 2.388a3.623 3.623 0 0 0 2.115 1.291c-.312.08-.641.118-.979.118-.312 0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652 0 0 0 2.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422 0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139 0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77 0 0 0 1.172-4.892v-.468a7.788 7.788 0 0 0 1.84-1.921 8.142 8.142 0 0 1-2.11.593z"
      ></path>
  </symbol>
  <symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail">
    <path  d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar">
    <path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916 0 100v352c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V100c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028 0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028 0 20 8.972 20 20v48z"></path>
    <path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github">
    <path d="M255.968 5.329C114.624 5.329 0 120.401 0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384 0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008 0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992 0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584 0 34.368-.32 62.08-.32 70.496 0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab">
    <path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6 0L12.3 74.8z" />
    <path d="M12.3 74.7L.5 111c-1 3.2 0 6.8 3 8.8l101.6 74-92.5-119z"/>
    <path d="M105 193.7l-38.6-119h-54l92.7 119z"/>
    <path d="M105 193.7l38.7-119H66.4l38.7 119z"/>
    <path d="M105 193.7l38.7-119H198l-93 119z"/>
    <path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/>
    <path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6 0L198 74.8z"/>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss">
    <circle cx="3.429" cy="20.571" r="3.429"></circle>
    <path d="M11.429 24h4.57C15.999 15.179 8.821 8.001 0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"></path>
    <path d="M24 24C24 10.766 13.234 0 0 0v4.571c10.714 0 19.43 8.714 19.43 19.429z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h362c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top">
    <path d="M604.501 440.509L325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298 0 36.323s26.223 10.024 36.222 0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221 0 9.999-10.023 9.999-26.298 0-36.323z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly">
    <path d="M504.971 239.029L448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c19.851 0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002 0 0 0 400 320v108c0 19.851-16.149 36-36 36h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c46.318 0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568 0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255 0 24-10.745 24-24S205.255 0 192 0h-44c-46.318 0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568 0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255 0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851 0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002 0 0 0 112 192z"></path>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M23 2.75A2.75 2.75 0 0 0 20.25 0H8.75A2.75 2.75 0 0 0 6 2.75v13.5A2.75 2.75 0 0 0 8.75 19h11.5A2.75 2.75 0 0 0 23 16.25zM18.25 14.5h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5z"></path>
    <path d="M8.75 20.5a4.255 4.255 0 0 1-4.25-4.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752 0 0 0 1 5.25v16A2.752 2.752 0 0 0 3.75 24h12a2.752 2.752 0 0 0 2.75-2.75v-.75z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme">
    <path d="M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu">
    <path d="M492 236H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954 0 96s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram">
    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id=youtube>
    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow">
    <path d="M21 27v-8h3v11H0V19h3v8h18z"></path><path d="M17.1.2L15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8l13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing">
    <path d="M18.188 0c-.517 0-.741.325-.927.66 0 0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211 0 .375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016 0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894 0 21.686 0h-3.498zM3.648 4.74c-.211 0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016 0 .021L1.86 16.051c-.099.188-.093.381 0 .529.085.142.239.234.45.234h3.461c.518 0 .766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord">
    <path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18" id="mastodon">
    <path
    fill="#ffffff"
    d="m 15.054695,9.8859583 c -0.22611,1.1632697 -2.02517,2.4363497 -4.09138,2.6830797 -1.0774504,0.12856 -2.1382704,0.24673 -3.2694704,0.19484 -1.84996,-0.0848 -3.30971,-0.44157 -3.30971,-0.44157 0,0.1801 0.0111,0.35157 0.0333,0.51194 0.24051,1.82571 1.81034,1.93508 3.29737,1.98607 1.50088,0.0514 2.8373104,-0.37004 2.8373104,-0.37004 l 0.0617,1.35686 c 0,0 -1.0498104,0.56374 -2.9199404,0.66742 -1.03124,0.0567 -2.3117,-0.0259 -3.80308,-0.42069 -3.23454998,-0.85613 -3.79081998,-4.304 -3.87592998,-7.8024197 -0.026,-1.03871 -0.01,-2.01815 -0.01,-2.83732 0,-3.57732 2.34385998,-4.62587996 2.34385998,-4.62587996 1.18184,-0.54277 3.20976,-0.77101 5.318,-0.7882499985409 h 0.0518 C 9.8267646,0.01719834 11.856025,0.24547834 13.037775,0.78824834 c 0,0 2.34377,1.04855996 2.34377,4.62587996 0,0 0.0294,2.63937 -0.32687,4.47183"/>
 <path
    fill="#000000"
    d="m 12.616925,5.6916583 v 4.3315297 h -1.71607 V 5.8189683 c 0,-0.88624 -0.37289,-1.33607 -1.1187604,-1.33607 -0.82467,0 -1.23799,0.53361 -1.23799,1.58875 v 2.30122 h -1.70594 v -2.30122 c 0,-1.05514 -0.4134,-1.58875 -1.23808,-1.58875 -0.74587,0 -1.11876,0.44983 -1.11876,1.33607 v 4.2042197 h -1.71607 V 5.6916583 c 0,-0.88527 0.22541,-1.58876 0.67817,-2.10922 0.46689,-0.52047 1.07833,-0.78727 1.83735,-0.78727 0.87816,0 1.54317,0.33752 1.98288,1.01267 l 0.42744,0.71655 0.42753,-0.71655 c 0.43961,-0.67515 1.10463,-1.01267 1.9828704,-1.01267 0.75893,0 1.37037,0.2668 1.83735,0.78727 0.45268,0.52046 0.67808,1.22395 0.67808,2.10922"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 530" id="bluesky" >
    <path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"/>
  </symbol>
</svg>

<footer class="footer">
  <div class="footer_inner wrap pale">
    <img src='https://William-Weng.github.io/icons/apple-touch-icon.png' class="icon icon_2 transparent" alt="William-Weng">
    <p>Copyright&nbsp;<span class="year"></span>&nbsp;WILLIAM-WENG. All Rights Reserved</p><a class="to_top" href="#documentTop">
  <svg class="icon">
  <title>to-top</title>
  <use xlink:href="#to-top"></use>
</svg>

</a>

  </div>
</footer>

<script type="text/javascript" src="https://William-Weng.github.io/en/js/bundle.ef18b7cbccbaaff8de21870709eafc196f6f5ffe0a978d7cc1fc489d084755617a79d19dff9f284e00b02ee517b64e64dc02d7ea310d40d485a957333cef7099.js" integrity="sha512-7xi3y8y6r/jeIYcHCer8GW9vX/4Kl418wfxInQhHVWF6edGd/58oTgCwLuUXtk5k3ALX6jENQNSFqVczPO9wmQ==" crossorigin="anonymous"></script>
  </body>
</html>
